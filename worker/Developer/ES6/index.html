<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"><title>ECMAScript 6 | Ada</title><meta name="keywords" content="前端基础,ES6"><meta name="author" content="Ada"><meta name="copyright" content="Ada"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#f7f9fe"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-touch-fullscreen" content="yes"><meta name="apple-mobile-web-app-title" content="ECMAScript 6"><meta name="application-name" content="ECMAScript 6"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="#f7f9fe"><meta property="og:type" content="article"><meta property="og:title" content="ECMAScript 6"><meta property="og:url" content="https://adalucky.github.io/worker/Developer/ES6/index.html"><meta property="og:site_name" content="Ada"><meta property="og:description" content="简介ECMAScript 6.0，简称ES6，是JavaScript语言的下一代标准，已经在2015年6月正式发布。其目标为使JavaScript可以用来编写复杂的大型应用程序，成为企业级开发语言。   参考资料   ECMAScript 6语法和应用 ECMAScript 2015 花费6年时间敲"><meta property="og:locale" content="zh-CN"><meta property="og:image" content="https://automation-manage.oss-cn-shanghai.aliyuncs.com/blog/auto/ES6.jpg"><meta property="article:author" content="Ada"><meta property="article:tag"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://automation-manage.oss-cn-shanghai.aliyuncs.com/blog/auto/ES6.jpg"><link rel="shortcut icon" href="https://image.3001.net/images/20210606/16229390604952.png"><link rel="canonical" href="https://adalucky.github.io/worker/Developer/ES6/"><link rel="preconnect" href="//npm.elemecdn.com"/><link rel="preconnect" href="//npm.onmicrosoft.cn"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta name="google-site-verification" content="xxx"/><meta name="baidu-site-verification" content="code-xxx"/><meta name="msvalidate.01" content="xxx"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.cbd.int/@fortawesome/fontawesome-free@6.4.0/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.cbd.int/@fancyapps/ui@5.0.20/dist/fancybox/fancybox.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  preloader: {"source":3},
  friends_vue_info: undefined,
  navMusic: false,
  mainTone: {"mode":"both","api":"https://img2color-go.vercel.app/api?img=","cover_change":true},
  authorStatus: undefined,
  algolia: {"appId":"Y7A93ZJERO","apiKey":"c032c0266df92b8e1e7f23f484b1992a","indexName":"hexo","hits":{"per_page":6},"languages":{"input_placeholder":"键入后按下回车搜索！","hits_empty":"找不到您查询的内容：${query}","hits_stats":"找到 ${hits} 条结果，用时 ${time} 毫秒"}},
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简","rightMenuMsgToTraditionalChinese":"转为繁体","rightMenuMsgToSimplifiedChinese":"转为简体"},
  noticeOutdate: {"limitDay":365,"position":"top","messagePrev":"It has been","messageNext":"days since the last update, the content of the article may be outdated."},
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":330},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    simplehomepage: true,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#3b70fc","bgDark":"#1f1f1f","position":"top-center"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.min.js',
      css: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  shortcutKey: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'ECMAScript 6',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2023-09-15 12:42:30',
  postMainColor: '',
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = (url,id = false) => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      if (id) link.id = id
      link.onerror = reject
      link.onload = link.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        link.onload = link.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#18171d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#f7f9fe')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="/assets/css/webpushr.css?1"><meta name="generator" content="Hexo 6.3.0"></head><body data-type="anzhiyu"><div id="web_bg"></div><div id="an_music_bg"></div><div id="loading-box" onclick="document.getElementById(&quot;loading-box&quot;).classList.add(&quot;loaded&quot;)"><div class="loading-bg"><img class="loading-img nolazyload" alt="加载头像" src="https://image.3001.net/images/20210606/16229390604952.png"/><div class="loading-image-dot"></div><div id="loading-percentage">0%</div></div></div><script>if (GLOBAL_CONFIG.preloader.source == "2" || GLOBAL_CONFIG.preloader.source == "3") {
  const loadingPercentage = document.getElementById("loading-percentage");
  let loadingPercentageTimer = setInterval(function() {
    var progressBar = document.querySelector(".pace-progress");
    if (!progressBar) return
    var currentValue = progressBar.getAttribute("data-progress-text");
    if (currentValue !== loadingPercentage.textContent) {
      loadingPercentage.textContent = currentValue;
      if (currentValue === "100%") {
        clearInterval(loadingPercentageTimer);
      }
    }
  }, 100);
}

const preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded");
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")
  }
}
window.addEventListener('load',()=> { preloader.endLoading() })
setTimeout(function(){preloader.endLoading();},10000)

if (true) {
  document.addEventListener('pjax:send', () => { preloader.initLoading() })
  document.addEventListener('pjax:complete', () => { preloader.endLoading() })
}</script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/progress_bar/progress_bar.css"/><script async="async" src="https://cdn.cbd.int/pace-js@1.2.4/pace.min.js" data-pace-options="{ &quot;restartOnRequestAfter&quot;:false,&quot;eventLag&quot;:false}"></script><div id="web_box"><div id="web_container"><div id="menu-mask"></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><div id="nav-group"><span id="blog_name"><div class="back-home-button"><i class="anzhiyufont anzhiyu-icon-grip-vertical"></i><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">网页</div><div class="back-menu-list"><a class="back-menu-item" href="https://adalucky.github.io/" title="博客" target="_blank"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.ico" alt="博客"/><span class="back-menu-item-text">博客</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">项目</div><div class="back-menu-list"><a class="back-menu-item" href="https://gitee.com/automatex/automate/" title="测试平台" target="_blank"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://image.anheyu.com/favicon.ico" alt="测试平台"/><span class="back-menu-item-text">测试平台</span></a></div></div></div></div><a id="site-name" href="/" accesskey="h"><div class="title">Ada</div><i class="anzhiyufont anzhiyu-icon-house-chimney"></i></a></span><div class="mask-name-container"><div id="name-container"><a id="page-name" href="javascript:anzhiyu.scrollToDest(0, 500)">PAGE_NAME</a></div></div><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/archives/"><span> 总览</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/categories/"><span> 分类</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/tags/"><span> 标签</span></a></div></div></div><div id="nav-right"><div class="nav-button" id="randomPost_button"><a class="site-page" onclick="toRandomPost()" title="随机前往一个文章" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-dice"></i></a></div><div class="nav-button" id="search-button"><a class="site-page social-icon search" href="javascript:void(0);" title="搜索🔍" accesskey="s"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span> 搜索</span></a></div><input id="center-console" type="checkbox"/><label class="widget" for="center-console" title="中控台" onclick="anzhiyu.switchConsole();"><i class="left"></i><i class="widget center"></i><i class="widget right"></i></label><div id="console"><div class="console-card-group-reward"><ul class="reward-all console-card"><li class="reward-item"><a href="https://automation-manage.oss-cn-shanghai.aliyuncs.com/blog/wechat.png" target="_blank"><img class="post-qr-code-img" alt="wechat" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://automation-manage.oss-cn-shanghai.aliyuncs.com/blog/wechat.png"/></a><div class="post-qr-code-desc">wechat</div></li><li class="reward-item"><a href="https://automation-manage.oss-cn-shanghai.aliyuncs.com/blog/alipay.png" target="_blank"><img class="post-qr-code-img" alt="alipay" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://automation-manage.oss-cn-shanghai.aliyuncs.com/blog/alipay.png"/></a><div class="post-qr-code-desc">alipay</div></li></ul></div><div class="console-card-group"><div class="console-card-group-left"><div class="console-card" id="card-newest-comments"><div class="card-content"><div class="author-content-item-tips">互动</div><span class="author-content-item-title"> <span>最新评论</span></span></div><div class="aside-list"><span>正在加载中...</span></div></div></div><div class="console-card-group-right"><div class="console-card tags"><div class="card-content"><div class="author-content-item-tips">兴趣点</div><span class="author-content-item-title">寻找你感兴趣的领域</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/Appium/" style="font-size: 1.05rem;">Appium<sup>1</sup></a><a href="/tags/Axios/" style="font-size: 1.05rem;">Axios<sup>1</sup></a><a href="/tags/Centos/" style="font-size: 1.05rem;">Centos<sup>1</sup></a><a href="/tags/Docker/" style="font-size: 1.05rem;">Docker<sup>2</sup></a><a href="/tags/ES6/" style="font-size: 1.05rem;">ES6<sup>1</sup></a><a href="/tags/Fiddler/" style="font-size: 1.05rem;">Fiddler<sup>1</sup></a><a href="/tags/Gradle/" style="font-size: 1.05rem;">Gradle<sup>1</sup></a><a href="/tags/Hexo/" style="font-size: 1.05rem;">Hexo<sup>2</sup></a><a href="/tags/JDK17/" style="font-size: 1.05rem;">JDK17<sup>1</sup></a><a href="/tags/Java/" style="font-size: 1.05rem;">Java<sup>3</sup></a><a href="/tags/Kafka/" style="font-size: 1.05rem;">Kafka<sup>1</sup></a><a href="/tags/Linux/" style="font-size: 1.05rem;">Linux<sup>1</sup></a><a href="/tags/MQ/" style="font-size: 1.05rem;">MQ<sup>1</sup></a><a href="/tags/MongoDB/" style="font-size: 1.05rem;">MongoDB<sup>1</sup></a><a href="/tags/NPM/" style="font-size: 1.05rem;">NPM<sup>1</sup></a><a href="/tags/NeoVim/" style="font-size: 1.05rem;">NeoVim<sup>1</sup></a><a href="/tags/Nginx/" style="font-size: 1.05rem;">Nginx<sup>2</sup></a><a href="/tags/OSS/" style="font-size: 1.05rem;">OSS<sup>1</sup></a><a href="/tags/Obsidian/" style="font-size: 1.05rem;">Obsidian<sup>1</sup></a><a href="/tags/SpringBoot/" style="font-size: 1.05rem;">SpringBoot<sup>3</sup></a><a href="/tags/TS/" style="font-size: 1.05rem;">TS<sup>3</sup></a><a href="/tags/Tmux/" style="font-size: 1.05rem;">Tmux<sup>1</sup></a><a href="/tags/Vite/" style="font-size: 1.05rem;">Vite<sup>1</sup></a><a href="/tags/Vue3/" style="font-size: 1.05rem;">Vue3<sup>1</sup></a><a href="/tags/Webpack/" style="font-size: 1.05rem;">Webpack<sup>1</sup></a><a href="/tags/Yarn/" style="font-size: 1.05rem;">Yarn<sup>1</sup></a><a href="/tags/asdf/" style="font-size: 1.05rem;">asdf<sup>1</sup></a><a href="/tags/css/" style="font-size: 1.05rem;">css<sup>1</sup></a><a href="/tags/docker/" style="font-size: 1.05rem;">docker<sup>1</sup></a><a href="/tags/docker-compose/" style="font-size: 1.05rem;">docker-compose<sup>1</sup></a><a href="/tags/eslint/" style="font-size: 1.05rem;">eslint<sup>1</sup></a><a href="/tags/html/" style="font-size: 1.05rem;">html<sup>1</sup></a><a href="/tags/jenkins/" style="font-size: 1.05rem;">jenkins<sup>1</sup></a><a href="/tags/pinia/" style="font-size: 1.05rem;">pinia<sup>1</sup></a><a href="/tags/setting/" style="font-size: 1.05rem;">setting<sup>1</sup></a><a href="/tags/%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80/" style="font-size: 1.05rem;">前端基础<sup>6</sup></a><a href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/" style="font-size: 1.05rem;">数据库<sup>1</sup></a><a href="/tags/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/" style="font-size: 1.05rem;">消息队列<sup>1</sup></a><a href="/tags/%E7%8E%AF%E5%A2%83%E7%AE%A1%E7%90%86/" style="font-size: 1.05rem;">环境管理<sup>1</sup></a><a href="/tags/%E9%9D%9E%E5%85%B3%E7%B3%BB%E5%9E%8B/" style="font-size: 1.05rem;">非关系型<sup>1</sup></a></div></div><hr/></div></div><div class="console-card history"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-box-archiv"></i><span>文章</span></div><div class="card-archives"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-archive"></i><span>归档</span><a class="card-more-btn" href="/archives/" title="查看更多">
    <i class="anzhiyufont anzhiyu-icon-angle-right"></i></a></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/08/"><span class="card-archive-list-date">八月 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/07/"><span class="card-archive-list-date">七月 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/06/"><span class="card-archive-list-date">六月 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">3</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/05/"><span class="card-archive-list-date">五月 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">5</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/08/"><span class="card-archive-list-date">八月 2022</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">3</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/06/"><span class="card-archive-list-date">六月 2022</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">2</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/05/"><span class="card-archive-list-date">五月 2022</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">3</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/04/"><span class="card-archive-list-date">四月 2022</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li></ul></div><hr/></div></div></div><div class="button-group"><div class="console-btn-item"><a class="darkmode_switchbutton" onclick="anzhiyu.switchDarkMode()" title="显示模式切换" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-moon"></i></a></div><div class="console-btn-item" id="consoleHideAside" onclick="anzhiyu.hideAsideBtn()" title="边栏显示控制"><a class="asideSwitch"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></a></div><div class="console-btn-item on" id="consoleCommentBarrage" onclick="anzhiyu.switchCommentBarrage()" title="热评开关"><a class="commentBarrage"><i class="anzhiyufont anzhiyu-icon-message"></i></a></div><div class="console-btn-item" id="consoleMusic" onclick="anzhiyu.musicToggle()" title="音乐开关"><a class="music-switch"><i class="anzhiyufont anzhiyu-icon-music"></i></a></div></div><div class="console-mask" onclick="anzhiyu.hideConsole()" href="javascript:void(0);"></div></div><div class="nav-button" id="nav-totop"><a class="totopbtn" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i><span id="percent" onclick="anzhiyu.scrollToDest(0,500)">0</span></a></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);" title="切换"><i class="anzhiyufont anzhiyu-icon-bars"></i></a></div></div></div></nav><div id="post-info"><div id="post-firstinfo"><div class="meta-firstline"><a class="post-meta-original">原创</a><span class="post-meta-categories"><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-inbox post-meta-icon"></i><a class="post-meta-categories" href="/categories/Develop/">Develop</a></span><span class="article-meta tags"><a class="article-meta__tags" href="/tags/%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80/" tabindex="-1"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>前端基础</span></a><a class="article-meta__tags" href="/tags/ES6/" tabindex="-1"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>ES6</span></a></span></div></div><h1 class="post-title">ECMAScript 6</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="anzhiyufont anzhiyu-icon-calendar-days post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-02-24T13:23:00.000Z" title="发表于 2022-02-24 21:23:00">2022-02-24</time><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-history post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2023-09-15T04:42:30.127Z" title="更新于 2023-09-15 12:42:30">2023-09-15</time></span></div><div class="meta-secondline"><span class="post-meta-separator"></span><span class="post-meta-wordcount"><i class="anzhiyufont anzhiyu-icon-file-word post-meta-icon" title="文章字数"></i><span class="post-meta-label" title="文章字数">字数总计:</span><span class="word-count" title="文章字数">10.2k</span><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-clock post-meta-icon" title="阅读时长"></i><span class="post-meta-label" title="阅读时长">阅读时长:</span><span>42分钟</span></span><span class="post-meta-separator"></span><span class="post-meta-pv-cv" id="" data-flag-title="ECMAScript 6"><i class="anzhiyufont anzhiyu-icon-fw-eye post-meta-icon"></i><span class="post-meta-label" title="阅读量">阅读量:</span><span id="busuanzi_value_page_pv"><i class="anzhiyufont anzhiyu-icon-spinner anzhiyu-spin"></i></span></span><span class="post-meta-separator">       </span><span class="post-meta-position" title="作者IP属地为成都"><i class="anzhiyufont anzhiyu-icon-location-dot"></i>成都</span><span class="post-meta-separator"></span><span class="post-meta-commentcount"><i class="anzhiyufont anzhiyu-icon-comments post-meta-icon"></i><span class="post-meta-label">评论数:</span><a href="/worker/Developer/ES6/#post-comment" itemprop="discussionUrl"><span class="valine-comment-count" data-xid="/worker/Developer/ES6/" itemprop="commentCount"><i class="anzhiyufont anzhiyu-icon-spinner anzhiyu-spin"></i></span></a></span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section><div id="post-top-cover"><img class="nolazyload" id="post-top-bg" src="https://automation-manage.oss-cn-shanghai.aliyuncs.com/blog/auto/ES6.jpg"></div></header><main class="layout" id="content-inner"><div id="post"><div class="post-ai-description"><div class="ai-title"><i class="anzhiyufont anzhiyu-icon-bilibili"></i><div class="ai-title-text">AI-摘要</div><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right"></i><div id="ai-tag">Tianli GPT</div></div><div class="ai-explanation">AI初始化中...</div><div class="ai-btn-box"><div class="ai-btn-item">介绍自己</div><div class="ai-btn-item">生成本文简介</div><div class="ai-btn-item">推荐相关文章</div><div class="ai-btn-item">前往主页</div><div class="ai-btn-item" id="go-tianli-blog">前往tianli博客</div></div><script data-pjax>(function(){
  // 当前随机到的ai摘要到index
  let lastAiRandomIndex = -1;
  let animationRunning = true; // 标志变量，控制动画函数的运行
  // 当前gpt模式
  let mode = "tianli"
  // 刷新点击次数
  let refreshNum = 0
  // 记录上一次传递给aiAbstract的参数
  let prevParam;
  const aiTitleRefreshIcon = document.querySelector(".ai-title .anzhiyufont.anzhiyu-icon-arrow-rotate-right")
  const explanation = document.querySelector(".ai-explanation");
  const post_ai = document.querySelector(".post-ai-description");
  let ai_str = "";
  let ai_str_length = "";
  let delay_init = 600;
  let i = 0;
  let j = 0;
  let sto = [];
  let elapsed = 0;
  const animate = timestamp => {
    if (!animationRunning) {
      return; // 动画函数停止运行
    }
    if (!animate.start) animate.start = timestamp;
    elapsed = timestamp - animate.start;
    if (elapsed >= 20) {
      animate.start = timestamp;
      if (i < ai_str_length - 1) {
        let char = ai_str.charAt(i + 1);
        let delay = /[,.，。!?！？]/.test(char) ? 150 : 20;
        if (explanation.firstElementChild) {
          explanation.removeChild(explanation.firstElementChild);
        }
        explanation.innerHTML += char;
        let div = document.createElement("div");
        div.className = "ai-cursor";
        explanation.appendChild(div);
        i++;
        if (delay === 150) {
          document.querySelector(".ai-explanation .ai-cursor").style.opacity = "0";
        }
        if (i === ai_str_length - 1) {
          observer.disconnect(); // 暂停监听
          explanation.removeChild(explanation.firstElementChild);
        }
        sto[0] = setTimeout(() => {
          requestAnimationFrame(animate);
        }, delay);
      }
    } else {
      requestAnimationFrame(animate);
    }
  };
  const observer = new IntersectionObserver(
    entries => {
      let isVisible = entries[0].isIntersecting;
      animationRunning = isVisible; // 标志变量更新
      if (animationRunning) {
        delay_init = i === 0 ? 200 : 20;
        sto[1] = setTimeout(() => {
          if (j) {
            i = 0;
            j = 0;
          }
          if (i === 0) {
            explanation.innerHTML = ai_str.charAt(0);
          }
          requestAnimationFrame(animate);
        }, delay_init);
      }
    },
    { threshold: 0 }
  );
  function clearSTO() {
    if (sto.length) {
      sto.forEach(item => {
        if (item) {
          clearTimeout(item);
        }
      });
    }
  }
  function startAI(str, df = true) {
    i = 0; //重置计数器
    j = 1;
    clearSTO();
    animationRunning = false;
    elapsed = 0;
    observer.disconnect(); // 暂停上一次监听
    explanation.innerHTML = df ? "生成中. . ." : "请等待. . .";
    ai_str = str;
    ai_str_length = ai_str.length;
    observer.observe(post_ai); //启动新监听
  }

  async function aiAbstract(num = 1000) {
    i = 0; //重置计数器
    j = 1;
    clearSTO();
    animationRunning = false;
    elapsed = 0;
    observer.disconnect(); // 暂停上一次监听
    if (mode === "tianli") {
      num = Math.max(10, Math.min(2000, num));
      const options = {
        key: "4e3ea06311f19e3442c0",
        Referer: "https://adalucky.github.io/"
      };
      const truncateDescription = ("ECMAScript 6" + "简介, 参考资料, ECMAScript 6语法和应用, ECMAScript和 JavaScrip的关系, 版本记录, letampconst, 简介, 缺陷, var可以重复声明, var无法限制修改, 变量提升, 解决方法（闭包amplet）, 示例一, 示例二, 示例三（let）, const, 总结, let, const, 对比, 箭头函数, 简介, 示例一（箭头函数基本使用）, 示例二（数组排序）, 示例三（箭头函数返回对象）, 示例四（构造方法）, 关于箭头函数中的this的指向, 简介, 示例一, 示例二, 示例三, 数组新方法, 常用新增方法, 示例一, 示例二, 示例三, 数据结构集合, set, 简介, 示例, map, 简介, 示例, 字符串新功能, 判断开头与结尾, 模板字符串, 解构赋值, 简介, 基础的解构, 复杂的解构, 扩展运算符, 简介, 数组展开放入, 参数传递, class, 简介, 对比, 继承, JSON, 简介, 简写, 串行化、 反串行化, Module模块化, 简介, 冲突示例, 导入导出, 示例一, 示例二简介简称是语言的下一代标准已经在年月正式发布其目标为使可以用来编写复杂的大型应用程序成为企业级开发语言参考资料语法和应用花费年时间敲定是一个很大的发行版认识函数的参数兼容性解决解构赋值和的用法箭头函数的新应用数组的新增方法模块数据结构的一些新特性介绍字符串和新增方法和模版字符串和的关系是的缩写中文称欧洲计算机制造联合会这个组织的目标是评估开发和认可电信和计算机标准是标准是实现类似是标准都是实现目的是让所有前端脚本都实现目前只有实现标准简称或目前版本高级浏览器支持低级浏览器主要支持版本记录时间版本说明年月的创造者公司将提交给标准化组织年发布号标准文件规定了浏览器脚本语言的标准并将这种语言称为年内容编辑加工没有特性修改年有较完善的修改成为的通行标准得到了广泛支持年年终止也称作因改动太大没有通过项目启动来跟进大部分内容被继承部分内容放到之后年新功能主要包括对象包含等方法和增加一些方法严格模式函数的方法年成为国际标准到了年底主流浏览器都支持的全部功能年做了大量的更新但向后兼容是一次重大改进部分功能变量的解构赋值箭头函数年新功能主要包括检查数组中是否存在值区别字符串的方法求幂运算等价于年部分功能函数参数列表和调用中的尾逗号异步函数年现在已经可用了新增异步迭代属性正则表达式命名捕获组正则表达式反向断言非转义序列的模板字符串简介为什么新增关键字声明变量因为最起初设计是写一写小的项目当时没有考虑的很全面后面使用的人多了声明变量就暴露了它的缺陷缺陷可以重复声明重复声明无法限制修改无法限制修改没有块级作用域块内块内这里没有限制代码块中变量的作用域其实是希望这里没办法使用到变量阿达这里在块内的赋值修改了块外的变量期望的是块内打印的是阿达块外打印的是没有限制修改变量提升不支持变量提升不管放在哪里定义都会把语句提升到最前面支持变量提升不支持变量提升解决方法闭包以前的解决方法是通过闭包的方式解决在块级中没有作用域但是在方法中有作用域示例一需求块内输出块内自己的变量值块外输出块外的变量值闭包中的输出阿达括号中的值是方法中传递的参数变量的输出示例二需求有个按钮每次点击打印对应的按钮序号按钮一按钮二按钮三按钮四按钮五按钮添加监听事件按钮一按钮二按钮三按钮四按钮五按钮添加监听事件示例三按钮一按钮二按钮三按钮四按钮五按钮添加监听事件限制修改常量方式总结以后都不用如果变量需要修改就用如果变量不希望修改就用定义为常量箭头函数定义的方法用对象用普通变量和数组用我的个人习惯新增和命令用来声明变量用法类似于声明的变量只在命令所在的代码块內有效命令不存在变量提升命令不允许在相同作用域内重复声明同一个变量拥有的特性也拥有不可以像一样分步声明例如因为的值不可改变一旦定义了就不能修改所以后面也不能进行赋值了命令声明一个只读的常量一旦声明常量的值就不能改变命令声明的常量不得改变值即一旦声明就必须立即初始化命令声明的常量只在声明所在的块级作用域内有效命令声明的常量不提升只能在声明的位置后使用命令声明的常量与一样不可重复声明命令声明的复合类型的数据主要是对象和数组变量指向的内存地址定义的基本类型不可修改复合类型对象数组也不可以修改复合类型的属性是可以修改的直接修改基本类型或者复合类型相当于修改栈内存中的地址是不允许的修改复合类型对象的属性其实是修改该类型指向堆内存中的属性不受影响定义的常量不可修改对象也不可以修改对象的属性是可以修改的张三男这个是支持的因为修改的是对象在堆里面的值李四男不支持因为是重新创建了一个堆的对象李四男然后赋值给栈里面的所以不可修改栈内存对比不可修改可以理解常量中的可以修改可以理解为变量箭头函数简介允许使用箭头定义不需要参数或需要多个参数就用圆括号代代码块部分多于一条语句就用大括号括起来并且用返回箭头函数返回对象时必须在对象外面加上括号箭头函数使得表达更加简洁箭头函数能够简化回调函数箭头函数类似于中的表达式示例一箭头函数基本使用基本规则把换成把放在参数和的中间如果只有一个参数等号和箭头中间写形参名如果大括号代码块内只有一条语句不用写和大括号这里是同时都不写和大括号一般是成对出现的有大括号一般都有如果有大括号里面哪怕只有一条语句也要加上不然调用该方法的时候会出现如果有多个参数或者没有参数也必须要用来定义参数列表没有参数的时候括号内就空着第一次演变把换成把放在参数和的中间第二次演变如果只有一个参数等号和箭头中间写形参名如果大括号代码块内只有一条语句不用写和大括号第三次演变如果有多个参数或者没有参数也必须要用来定义参数列表没有参数的时候括号内就空着第四次演变没有参数也要用括号来定义参数列表方法体内只有一条语句不用加大括号和关键字示例二数组排序方法的演变还是和上面示例一相同把换成把放在参数和的中间箭头函数的函数体只有一条语句不用加和数组升序排列从小到大表示从小到大表示从大到小箭头函数数组降序序排列从大到小表示从大到小示例三箭头函数返回对象返回的对象需要用法大括号包裹起来和箭头函数的大括号有冲突所以可通过外面包裹一层大括号或者用小括号包括返回的对象不能直接像上面那样只有一条语句连对象的大括号都不写对象需要用大括号包裹的不然工具就会报错方式一箭头函数返回对象时语法返回的对象内容如果只写里面的对象的括号语法会以为是箭头函数的大括号阿达方式二其实我们只有一条语句不想写语句就用小括号括住返回的对象返回的对象示例四构造方法箭头函数没有构造方法因此不能用箭头函数定义一个方法然后还去这个方法控制台会提示不是一个构造方法因为是用箭头函数定义的箭头函数没有构造方法关于箭头函数中的的指向简介普通函数的指向它的调用者如果没有调用者则默认指向箭头函数的指向箭头函数定义时所处的对象而不是箭头函数使用时所在的对象默认使用父级的综上箭头函数没有自己的它的是继承而来默认指向在定义它时所处的对象宿主对象上面三条看起很懵没关系接着看下面的两个示例看完再回来理解这三条的含义示例一普通函数谁调用这个方法就代表谁没有人调用直接运行就代表最大的对象箭头函数跟调用者无关指向的是函数定义时所处的对象可以理解为父级的对象如果父级没有就再往上找最后是到对象下图中的定义在对象该对象直接是在里面定义的因此上下文的就是所以无论怎么调用都会指向对象定义了一个对象里面代码块的形式定义了一个方法定义的方法语法有点类似格式用这个对象调用运行就会指向它的调用者也就会是这个没有对象调用直接用运行就会指向对象对象代码块箭头函数的形式定义了一个方法定义的方法语法有点类似格式用这个对象调用运行指向箭头函数定义时所处的对象而不是箭头函数使用时所在的对象默认使用父级的示例二再次强调普通函数的指向和调用者有关下面的内容主要是针对示例一更加直观的解释指向问题普通函数左侧代码大致的意思是定义了一个设置了属性当发生点击时添加新的样式进来右侧是把添加新样式的方法写在了里面等待三秒因为是的对象所以调用者不是因此无法改变颜色通过对比来阐述普通函数对象指向的是调用者示例三本内容是对示例二中添加了函数无法改变颜色获取我们期望的对象做修复普通函数就在前获取对象命名为此时的指向的是对象再用这个调用就相当于用调用普通函数指向和调用者有关箭头函数与调用者无关指向箭头函数定义时所处的对象此时的是把赋给用上面赋值的调用就相当于用调用箭头函数指向和调用者无关指向箭头函数定义时所处的对象数组新方法常用新增方法过滤器过滤掉不符合条件的数据映射把数据映射到新的对象中汇总统计求和数组中有一个为真就返回真待补充判断时候用数组中有全部为真才返回真待补充判断时候用需求有一批商品现在要做促销活动把价格大于等于的商品打折后计算此次促销会少赚多少钱通过该需求进行高级函数的演示示例一示例一中将用以前原始的写法进行实现需求语法可以了解一下需求有一批商品现在要把大于或等于元的商品促销打折处理过滤元的商品把过滤的商品打折列出促销产品打折前后的价格计算此次促销少赚多少钱步骤一定义了一个空的数组用于存放的商品价格过滤该语法相当于会去循环数组循环的次数就是数组的长度是每次循环对应下标的值步骤二定义了一个空的数组用于存放的商品价格打折以后的价格打折定义两个数组用于存放促销商品打折前后的价格步骤三促销产品打折前价格步骤三促销产品打折后价格促销产品原始总价促销产品打折后总价少盈利示例二示例二中采用中新增的高级方法实现需求有一批商品现在要把大于或等于元的商品促销打折处理过滤元的商品把过滤的商品打折列出促销产品打折前后的价格计算此次促销少赚多少钱步骤一过滤的商品价格参数为每次遍历数组后的结果当布尔表达式才返回到数组中步骤二打折后映射到新的数组中参数为每次遍历数组后的结果打折后返回至中有两个参数给了一个初始值就是后面的不给值默认也是遍历数组中的每一个对象值第一次中第一个元素后第二次后第三次后步骤三促销产品打折前价格步骤三促销产品打折后价格促销产品原始总价促销产品打折后总价少盈利示例三在示例二的基础上进行链式编程方式更加优雅的实现需求有一批商品现在要把大于或等于元的商品促销打折处理过滤元的商品把过滤的商品打折列出促销产品打折前后的价格计算此次促销少赚多少钱促销产品打折前价格采用链式编程过滤映射汇总这两个其实都是一样的故意用两种写法因为箭头函数中只有一条语句可写可不写如果不传参默认就是如果传参的话写在箭头函数的后面用逗号分割参数促销产品打折后价格采用链式编程过滤映射汇总促销产品原始总价促销产品打折后总价少盈利数据结构集合简介集合和的集合差不多集合中只能存放值没有键相同的值只能存储一个一个集合中可以同时存放不同的数据类型比如整型字符串数组等示例常用方法添加数据添加数据重复数据是无效的测试判断集合中是否有返回的是一个布尔值删除集合中等于的值删除成功返回删除失败返回这里面没有就会删除失败返回两种遍历方式遍历结果清空集合获取集合大小简介也和的差不多通过键值对存储数据结构类似于对象是键值对的集合传统的键只能用字符串的键不限于字符串各种类型的值包括对象都可以当作键属性和操作方法属性返回结构的成员总数方法设置方法设置键名对应的键值为然后返回整个结构如果已经有值则键值会被更新否则就新生成该方法读取对应的键值如果找不到返回方法返回一个布尔值表示某个键是否在当前对象之中方法删除某个键返回如果删除失败返回方法清除所有成员没有返回值遍历返回键名的遍历器返回键值的遍历器返回所有成员的遍历器遍历的所有成员示例常用方法重复的会覆盖上面输出的下面输出的阿达阿达遍历和的一样一样的删除判断是否有获取大小字符串新功能判断以什么字符串开头判断以什么字符串结尾模板字符串判断开头与结尾域名前面部分域名后面部分是一个标准的开头结尾的域名上面注释的是普通字符串拼接的变量下面是用模板字符串引用变量是一个标准的开头结尾的域名不是一个标准的开头结尾的域名模板字符串模板字符串定义字符引用变量支持换行这是标题这是标语里面还可以拼接标签这使用方法换行会直接换行模板字符串中直接引用变量不需要用加号隔开换行也会自动用加号拼接最后打印都是一行字符串拼接解构赋值简介解构赋值序列解包注意事项结构构必须一样比如数组两边都需要用数组对象男接受的参数个数不能操作数据的长度可以少当少于长度时按照从左到右顺序解构解构赋值不能像定义变量一样分开声明和赋值例如基础的解构男等号右边可以是引用的数组也可以直接显示声明数组两边的结构保持一致都是数组接受的参数个数可以小于数组的长度不能超出长度直接显示声明对象结构的是按照取得所有参数名和对象中的要一致顺序无所谓男复杂的解构这种复杂的一般比较少不常用先确定外层结构两边保持一至内层结构中有对象数组的那么用对象名来二次结构对象的数组中又有对象用对象名对象名较为复杂的组合结构先确定外层结构两边保持一至内层结构中有对象数组的那么用对象名来二次结构对象的数组中又有对象用对象名对象名字符串字符串字符字符小明扩展运算符简介三点运算符展开数组默认参数和中的可变参数一样数组展开放入先展开数组然后按照所在位置存入数组中三个点展开数组然后放进数组中参数传递如果方法中有自定义的参数和需要可变参数可变参数需要放在最后一个形参中调用方法是作为参数传递方法中只需要个参数就会取数组中的前个值方法中用作为可变参数传进来的会当成一个数组处理也可根据的下标取值测试男如果方法中有自定义的参数和需要可变参数可变参数需要放在最后一个形参中定义的中有个参数和一个可变参数调用的时候只传了一个和一个展开的数组展开的数组的第一个就会赋给剩下的给可变参数的值为的值为的值为字符简介之前叫做基于对象新增了类的概念可以说是面向对象的是构造方法关键字代表实例对象通过关键字实现继承关键字表示父类的构造函数用来新建父类的对象对比通过截图中左右两段代码可看出来的定义类方法构造方法层次更加清晰前既是构造函数又是方法我是跑起来吧男构造方法关键字我是后面跑起来了阿达男性继承继承通过关键字实现子类如果重写了父类的方法调用的是子类自己的方法子类的方法中如果需要调用父类的其它方法可以使用这种方式我是父类的后面跑起来了子类的构造方法因为我们子类只新增了一个参数那么可以用之前的可变参数优雅在子类的构造方法中调用父类的构造方法后再把新增的也给初始化子类重写父类的对象方法我是子类的十八线学校阿达男性简介串行化反串行化简写属性和值名字一样可以简写方法一样可以简写省简写男阿达简写简写既是键又是值的引用不行因为对象的叫变量名叫男对象里面再套一个方法简写为男串行化反串行化串行化对象转成字符串反串行化格式的字符串转成对象里面再套一个方法简写为男会输出此时的已经被串行成了字符串没有的属性这一句就会报错因为上面串行化的时候已经丢失了的方法模块化简介模块化优点减少命名冲突避免引入时的层层依赖可以提升执行效率命令用于规定模块的对外接口一个模块就是一个独立的文件该文件内部的所有变量外部无法获取如果你希望外部能够读取模块内部的某个变量就必须使用关键字输出该变量命令用于输入其他模块提供的功能命令接受一对大括号里面指定要从其他模块导入的变量名大括号里面的变量名必须与被导入模块对外接口的名称相同冲突示例当我们在中引入的时多个存在重复的变量名方法名函数名就会发生冲突已经命名的不能重复命名解决方法给每个文件类型都设置成这样都是独立的了导入导出坑如果是用运行导入导出使用的关键分别为坑如果是用浏览器运行导入导出使用的关键分别为注意事项如果是用运行文件后的可以不写如果是浏览器运行导出的文件必须写后缀这里不包含打包工具处理哈可能有些打包工具会自动处理上述问题导出的时候可以整体用一个导出导出也可以在单个上用导出导入导出时需要使用到解构赋值简写的方式比较简便示例一导入时有命名冲突的可在导入方用起别名导出简写中支持的简写方式既是又是如果是用运行导出关键字为如果是浏览器运行导出的关键字为这是返回的男这是返回的中类的方法如果是用运行导入关键字为文件后的可以不写如果是浏览器运行导出的关键字为文件后的必须写如果有命名冲突的可以再导入方起个别名示例二导出时一个文件最多可以定义一个匿名的导出由导入方定义名称导出的时候也可以通过起别名导入的时候可以用把暴露的接口都整合在一个对象中使用时直接用这个对象来操作匿名的导出方不需要定义名称导入方自定义一个文件中只能有一个需要单独写这是返回的男中类的方法导入方自定义中的匿名函数需要单独写一个不能放在中导入中暴露出来的接口并起个别名为").trim().substring(0, num)

      const queryParams = `key=${options.key}&content=${truncateDescription}`;
      const requestOptions = {
        method: "GET",
        headers: {
          "Content-Type": "application/json",
          Referer: options.Referer
        },
      };
      try {
        let animationInterval = null
        if (animationInterval) clearInterval(animationInterval);
        animationInterval = setInterval(() => {
          const animationText = "生成中" + ".".repeat(j);
          explanation.innerHTML = animationText;
          j = (j % 3) + 1; // 在 1、2、3 之间循环
        }, 500);
        const response = await fetch(`https://summary.tianli0.top/?${queryParams}`, requestOptions);
        let result;
        if (response.status === 403) {
          result = {
            summary: "403 refer与key不匹配，本地无法显示。"
          }
        } else if (response.status === 500) {
          result = {
            summary: "500 系统内部错误"
          }
        } else {
          result = await response.json();
        }
        const summary = result.summary.trim();
        setTimeout(() => {
          aiTitleRefreshIcon.style.opacity = "1";
        }, 300)
        startAI(summary);
        clearInterval(animationInterval)
      } catch (error) {
        console.error(error);
        explanation.innerHTML = "发生异常" + error;
      }
    } else {
      const strArr = "true".split(",").map(item => item.trim()); // 将字符串转换为数组，去除每个字符串前后的空格
      if (strArr.length !== 1) {
        let randomIndex = Math.floor(Math.random() * strArr.length); // 随机生成一个索引
        while (randomIndex === lastAiRandomIndex) { // 如果随机到了上次的索引
          randomIndex = Math.floor(Math.random() * strArr.length); // 再次随机
        }
        lastAiRandomIndex = randomIndex; // 更新上次随机到的索引
        startAI(strArr[randomIndex]);
      } else {
        startAI(strArr[0])
      }
      setTimeout(() => {
        aiTitleRefreshIcon.style.opacity = "1";
      }, 600)
    }
  }

  function aiRecommend() {
    i = 0; //重置计数器
    j = 1;
    clearSTO();
    animationRunning = false;
    elapsed = 0;
    explanation.innerHTML = "生成中. . .";
    ai_str = "";
    ai_str_length = "";
    observer.disconnect(); // 暂停上一次监听
    sto[2] = setTimeout(() => {
      explanation.innerHTML = recommendList();
    }, 600);
  }
  function aiGoHome() {
    startAI("正在前往博客主页...", false);
    sto[2] = setTimeout(() => {
      pjax.loadUrl("/");
    }, 1000);
  }
  const ai_btn_item = document.querySelectorAll(".ai-btn-item");
  function Introduce() {
    if (mode == "tianli") {
      startAI("我是文章辅助AI: TianliGPT，点击下方的按钮，让我生成本文简介、推荐相关文章等。")
    } else {
      startAI("我是文章辅助AI: AnZhiYu GPT，点击下方的按钮，让我生成本文简介、推荐相关文章等。")
    }
  }
  function aiTitleRefreshIconClick() {
    aiTitleRefreshIcon.click()
  }
  const aiFunctions = [Introduce, aiTitleRefreshIconClick, aiRecommend, aiGoHome];
  ai_btn_item.forEach((item, index) => {
    item.addEventListener("click", () => {
      aiFunctions[index]();
    });
  });

  function recommendList() {
    let thumbnail = document.querySelectorAll('.relatedPosts-list a');
    if (!thumbnail.length) {
      const cardRecentPost = document.querySelector('.card-widget.card-recent-post'); 
      if (!cardRecentPost) return '';

      thumbnail = cardRecentPost.querySelectorAll('.aside-list-item a');

      let list = '';
      for (let i = 0; i < thumbnail.length; i++) {
        const item = thumbnail[i];
        list += `<div class="ai-recommend-item"><span class="index">${i + 1}：</span><a href="javascript:;" onclick="pjax.loadUrl('${item.href}')" title="${item.title}" data-pjax-state="">${item.title}</a></div>`;
      }
      
      return `很抱歉，无法找到类似的文章，你也可以看看本站最新发布的文章：<br /><div class="ai-recommend">${list}</div>`;
    }

    let list = '';
    for (let i = 0; i < thumbnail.length; i++) {
      const item = thumbnail[i];
      list += `<div class="ai-recommend-item"><span>推荐${i + 1}：</span><a href="javascript:;" onclick="pjax.loadUrl('${item.href}')" title="${item.title}" data-pjax-state="">${item.title}</a></div>`;
    }

    return `推荐文章：<br /><div class="ai-recommend">${list}</div>`;
  }


  function changeShowMode() {
    if (mode === "tianli") {
      mode = "local";
      document.getElementById("ai-tag").innerHTML = "AnZhiYu GPT";
      aiAbstract(1000);
    } else {
      mode = "tianli";
      document.getElementById("ai-tag").innerHTML = "Tianli GPT";

      const truncateDescription = ("" + "简介, 参考资料, ECMAScript 6语法和应用, ECMAScript和 JavaScrip的关系, 版本记录, letampconst, 简介, 缺陷, var可以重复声明, var无法限制修改, 变量提升, 解决方法（闭包amplet）, 示例一, 示例二, 示例三（let）, const, 总结, let, const, 对比, 箭头函数, 简介, 示例一（箭头函数基本使用）, 示例二（数组排序）, 示例三（箭头函数返回对象）, 示例四（构造方法）, 关于箭头函数中的this的指向, 简介, 示例一, 示例二, 示例三, 数组新方法, 常用新增方法, 示例一, 示例二, 示例三, 数据结构集合, set, 简介, 示例, map, 简介, 示例, 字符串新功能, 判断开头与结尾, 模板字符串, 解构赋值, 简介, 基础的解构, 复杂的解构, 扩展运算符, 简介, 数组展开放入, 参数传递, class, 简介, 对比, 继承, JSON, 简介, 简写, 串行化、 反串行化, Module模块化, 简介, 冲突示例, 导入导出, 示例一, 示例二简介简称是语言的下一代标准已经在年月正式发布其目标为使可以用来编写复杂的大型应用程序成为企业级开发语言参考资料语法和应用花费年时间敲定是一个很大的发行版认识函数的参数兼容性解决解构赋值和的用法箭头函数的新应用数组的新增方法模块数据结构的一些新特性介绍字符串和新增方法和模版字符串和的关系是的缩写中文称欧洲计算机制造联合会这个组织的目标是评估开发和认可电信和计算机标准是标准是实现类似是标准都是实现目的是让所有前端脚本都实现目前只有实现标准简称或目前版本高级浏览器支持低级浏览器主要支持版本记录时间版本说明年月的创造者公司将提交给标准化组织年发布号标准文件规定了浏览器脚本语言的标准并将这种语言称为年内容编辑加工没有特性修改年有较完善的修改成为的通行标准得到了广泛支持年年终止也称作因改动太大没有通过项目启动来跟进大部分内容被继承部分内容放到之后年新功能主要包括对象包含等方法和增加一些方法严格模式函数的方法年成为国际标准到了年底主流浏览器都支持的全部功能年做了大量的更新但向后兼容是一次重大改进部分功能变量的解构赋值箭头函数年新功能主要包括检查数组中是否存在值区别字符串的方法求幂运算等价于年部分功能函数参数列表和调用中的尾逗号异步函数年现在已经可用了新增异步迭代属性正则表达式命名捕获组正则表达式反向断言非转义序列的模板字符串简介为什么新增关键字声明变量因为最起初设计是写一写小的项目当时没有考虑的很全面后面使用的人多了声明变量就暴露了它的缺陷缺陷可以重复声明重复声明无法限制修改无法限制修改没有块级作用域块内块内这里没有限制代码块中变量的作用域其实是希望这里没办法使用到变量阿达这里在块内的赋值修改了块外的变量期望的是块内打印的是阿达块外打印的是没有限制修改变量提升不支持变量提升不管放在哪里定义都会把语句提升到最前面支持变量提升不支持变量提升解决方法闭包以前的解决方法是通过闭包的方式解决在块级中没有作用域但是在方法中有作用域示例一需求块内输出块内自己的变量值块外输出块外的变量值闭包中的输出阿达括号中的值是方法中传递的参数变量的输出示例二需求有个按钮每次点击打印对应的按钮序号按钮一按钮二按钮三按钮四按钮五按钮添加监听事件按钮一按钮二按钮三按钮四按钮五按钮添加监听事件示例三按钮一按钮二按钮三按钮四按钮五按钮添加监听事件限制修改常量方式总结以后都不用如果变量需要修改就用如果变量不希望修改就用定义为常量箭头函数定义的方法用对象用普通变量和数组用我的个人习惯新增和命令用来声明变量用法类似于声明的变量只在命令所在的代码块內有效命令不存在变量提升命令不允许在相同作用域内重复声明同一个变量拥有的特性也拥有不可以像一样分步声明例如因为的值不可改变一旦定义了就不能修改所以后面也不能进行赋值了命令声明一个只读的常量一旦声明常量的值就不能改变命令声明的常量不得改变值即一旦声明就必须立即初始化命令声明的常量只在声明所在的块级作用域内有效命令声明的常量不提升只能在声明的位置后使用命令声明的常量与一样不可重复声明命令声明的复合类型的数据主要是对象和数组变量指向的内存地址定义的基本类型不可修改复合类型对象数组也不可以修改复合类型的属性是可以修改的直接修改基本类型或者复合类型相当于修改栈内存中的地址是不允许的修改复合类型对象的属性其实是修改该类型指向堆内存中的属性不受影响定义的常量不可修改对象也不可以修改对象的属性是可以修改的张三男这个是支持的因为修改的是对象在堆里面的值李四男不支持因为是重新创建了一个堆的对象李四男然后赋值给栈里面的所以不可修改栈内存对比不可修改可以理解常量中的可以修改可以理解为变量箭头函数简介允许使用箭头定义不需要参数或需要多个参数就用圆括号代代码块部分多于一条语句就用大括号括起来并且用返回箭头函数返回对象时必须在对象外面加上括号箭头函数使得表达更加简洁箭头函数能够简化回调函数箭头函数类似于中的表达式示例一箭头函数基本使用基本规则把换成把放在参数和的中间如果只有一个参数等号和箭头中间写形参名如果大括号代码块内只有一条语句不用写和大括号这里是同时都不写和大括号一般是成对出现的有大括号一般都有如果有大括号里面哪怕只有一条语句也要加上不然调用该方法的时候会出现如果有多个参数或者没有参数也必须要用来定义参数列表没有参数的时候括号内就空着第一次演变把换成把放在参数和的中间第二次演变如果只有一个参数等号和箭头中间写形参名如果大括号代码块内只有一条语句不用写和大括号第三次演变如果有多个参数或者没有参数也必须要用来定义参数列表没有参数的时候括号内就空着第四次演变没有参数也要用括号来定义参数列表方法体内只有一条语句不用加大括号和关键字示例二数组排序方法的演变还是和上面示例一相同把换成把放在参数和的中间箭头函数的函数体只有一条语句不用加和数组升序排列从小到大表示从小到大表示从大到小箭头函数数组降序序排列从大到小表示从大到小示例三箭头函数返回对象返回的对象需要用法大括号包裹起来和箭头函数的大括号有冲突所以可通过外面包裹一层大括号或者用小括号包括返回的对象不能直接像上面那样只有一条语句连对象的大括号都不写对象需要用大括号包裹的不然工具就会报错方式一箭头函数返回对象时语法返回的对象内容如果只写里面的对象的括号语法会以为是箭头函数的大括号阿达方式二其实我们只有一条语句不想写语句就用小括号括住返回的对象返回的对象示例四构造方法箭头函数没有构造方法因此不能用箭头函数定义一个方法然后还去这个方法控制台会提示不是一个构造方法因为是用箭头函数定义的箭头函数没有构造方法关于箭头函数中的的指向简介普通函数的指向它的调用者如果没有调用者则默认指向箭头函数的指向箭头函数定义时所处的对象而不是箭头函数使用时所在的对象默认使用父级的综上箭头函数没有自己的它的是继承而来默认指向在定义它时所处的对象宿主对象上面三条看起很懵没关系接着看下面的两个示例看完再回来理解这三条的含义示例一普通函数谁调用这个方法就代表谁没有人调用直接运行就代表最大的对象箭头函数跟调用者无关指向的是函数定义时所处的对象可以理解为父级的对象如果父级没有就再往上找最后是到对象下图中的定义在对象该对象直接是在里面定义的因此上下文的就是所以无论怎么调用都会指向对象定义了一个对象里面代码块的形式定义了一个方法定义的方法语法有点类似格式用这个对象调用运行就会指向它的调用者也就会是这个没有对象调用直接用运行就会指向对象对象代码块箭头函数的形式定义了一个方法定义的方法语法有点类似格式用这个对象调用运行指向箭头函数定义时所处的对象而不是箭头函数使用时所在的对象默认使用父级的示例二再次强调普通函数的指向和调用者有关下面的内容主要是针对示例一更加直观的解释指向问题普通函数左侧代码大致的意思是定义了一个设置了属性当发生点击时添加新的样式进来右侧是把添加新样式的方法写在了里面等待三秒因为是的对象所以调用者不是因此无法改变颜色通过对比来阐述普通函数对象指向的是调用者示例三本内容是对示例二中添加了函数无法改变颜色获取我们期望的对象做修复普通函数就在前获取对象命名为此时的指向的是对象再用这个调用就相当于用调用普通函数指向和调用者有关箭头函数与调用者无关指向箭头函数定义时所处的对象此时的是把赋给用上面赋值的调用就相当于用调用箭头函数指向和调用者无关指向箭头函数定义时所处的对象数组新方法常用新增方法过滤器过滤掉不符合条件的数据映射把数据映射到新的对象中汇总统计求和数组中有一个为真就返回真待补充判断时候用数组中有全部为真才返回真待补充判断时候用需求有一批商品现在要做促销活动把价格大于等于的商品打折后计算此次促销会少赚多少钱通过该需求进行高级函数的演示示例一示例一中将用以前原始的写法进行实现需求语法可以了解一下需求有一批商品现在要把大于或等于元的商品促销打折处理过滤元的商品把过滤的商品打折列出促销产品打折前后的价格计算此次促销少赚多少钱步骤一定义了一个空的数组用于存放的商品价格过滤该语法相当于会去循环数组循环的次数就是数组的长度是每次循环对应下标的值步骤二定义了一个空的数组用于存放的商品价格打折以后的价格打折定义两个数组用于存放促销商品打折前后的价格步骤三促销产品打折前价格步骤三促销产品打折后价格促销产品原始总价促销产品打折后总价少盈利示例二示例二中采用中新增的高级方法实现需求有一批商品现在要把大于或等于元的商品促销打折处理过滤元的商品把过滤的商品打折列出促销产品打折前后的价格计算此次促销少赚多少钱步骤一过滤的商品价格参数为每次遍历数组后的结果当布尔表达式才返回到数组中步骤二打折后映射到新的数组中参数为每次遍历数组后的结果打折后返回至中有两个参数给了一个初始值就是后面的不给值默认也是遍历数组中的每一个对象值第一次中第一个元素后第二次后第三次后步骤三促销产品打折前价格步骤三促销产品打折后价格促销产品原始总价促销产品打折后总价少盈利示例三在示例二的基础上进行链式编程方式更加优雅的实现需求有一批商品现在要把大于或等于元的商品促销打折处理过滤元的商品把过滤的商品打折列出促销产品打折前后的价格计算此次促销少赚多少钱促销产品打折前价格采用链式编程过滤映射汇总这两个其实都是一样的故意用两种写法因为箭头函数中只有一条语句可写可不写如果不传参默认就是如果传参的话写在箭头函数的后面用逗号分割参数促销产品打折后价格采用链式编程过滤映射汇总促销产品原始总价促销产品打折后总价少盈利数据结构集合简介集合和的集合差不多集合中只能存放值没有键相同的值只能存储一个一个集合中可以同时存放不同的数据类型比如整型字符串数组等示例常用方法添加数据添加数据重复数据是无效的测试判断集合中是否有返回的是一个布尔值删除集合中等于的值删除成功返回删除失败返回这里面没有就会删除失败返回两种遍历方式遍历结果清空集合获取集合大小简介也和的差不多通过键值对存储数据结构类似于对象是键值对的集合传统的键只能用字符串的键不限于字符串各种类型的值包括对象都可以当作键属性和操作方法属性返回结构的成员总数方法设置方法设置键名对应的键值为然后返回整个结构如果已经有值则键值会被更新否则就新生成该方法读取对应的键值如果找不到返回方法返回一个布尔值表示某个键是否在当前对象之中方法删除某个键返回如果删除失败返回方法清除所有成员没有返回值遍历返回键名的遍历器返回键值的遍历器返回所有成员的遍历器遍历的所有成员示例常用方法重复的会覆盖上面输出的下面输出的阿达阿达遍历和的一样一样的删除判断是否有获取大小字符串新功能判断以什么字符串开头判断以什么字符串结尾模板字符串判断开头与结尾域名前面部分域名后面部分是一个标准的开头结尾的域名上面注释的是普通字符串拼接的变量下面是用模板字符串引用变量是一个标准的开头结尾的域名不是一个标准的开头结尾的域名模板字符串模板字符串定义字符引用变量支持换行这是标题这是标语里面还可以拼接标签这使用方法换行会直接换行模板字符串中直接引用变量不需要用加号隔开换行也会自动用加号拼接最后打印都是一行字符串拼接解构赋值简介解构赋值序列解包注意事项结构构必须一样比如数组两边都需要用数组对象男接受的参数个数不能操作数据的长度可以少当少于长度时按照从左到右顺序解构解构赋值不能像定义变量一样分开声明和赋值例如基础的解构男等号右边可以是引用的数组也可以直接显示声明数组两边的结构保持一致都是数组接受的参数个数可以小于数组的长度不能超出长度直接显示声明对象结构的是按照取得所有参数名和对象中的要一致顺序无所谓男复杂的解构这种复杂的一般比较少不常用先确定外层结构两边保持一至内层结构中有对象数组的那么用对象名来二次结构对象的数组中又有对象用对象名对象名较为复杂的组合结构先确定外层结构两边保持一至内层结构中有对象数组的那么用对象名来二次结构对象的数组中又有对象用对象名对象名字符串字符串字符字符小明扩展运算符简介三点运算符展开数组默认参数和中的可变参数一样数组展开放入先展开数组然后按照所在位置存入数组中三个点展开数组然后放进数组中参数传递如果方法中有自定义的参数和需要可变参数可变参数需要放在最后一个形参中调用方法是作为参数传递方法中只需要个参数就会取数组中的前个值方法中用作为可变参数传进来的会当成一个数组处理也可根据的下标取值测试男如果方法中有自定义的参数和需要可变参数可变参数需要放在最后一个形参中定义的中有个参数和一个可变参数调用的时候只传了一个和一个展开的数组展开的数组的第一个就会赋给剩下的给可变参数的值为的值为的值为字符简介之前叫做基于对象新增了类的概念可以说是面向对象的是构造方法关键字代表实例对象通过关键字实现继承关键字表示父类的构造函数用来新建父类的对象对比通过截图中左右两段代码可看出来的定义类方法构造方法层次更加清晰前既是构造函数又是方法我是跑起来吧男构造方法关键字我是后面跑起来了阿达男性继承继承通过关键字实现子类如果重写了父类的方法调用的是子类自己的方法子类的方法中如果需要调用父类的其它方法可以使用这种方式我是父类的后面跑起来了子类的构造方法因为我们子类只新增了一个参数那么可以用之前的可变参数优雅在子类的构造方法中调用父类的构造方法后再把新增的也给初始化子类重写父类的对象方法我是子类的十八线学校阿达男性简介串行化反串行化简写属性和值名字一样可以简写方法一样可以简写省简写男阿达简写简写既是键又是值的引用不行因为对象的叫变量名叫男对象里面再套一个方法简写为男串行化反串行化串行化对象转成字符串反串行化格式的字符串转成对象里面再套一个方法简写为男会输出此时的已经被串行成了字符串没有的属性这一句就会报错因为上面串行化的时候已经丢失了的方法模块化简介模块化优点减少命名冲突避免引入时的层层依赖可以提升执行效率命令用于规定模块的对外接口一个模块就是一个独立的文件该文件内部的所有变量外部无法获取如果你希望外部能够读取模块内部的某个变量就必须使用关键字输出该变量命令用于输入其他模块提供的功能命令接受一对大括号里面指定要从其他模块导入的变量名大括号里面的变量名必须与被导入模块对外接口的名称相同冲突示例当我们在中引入的时多个存在重复的变量名方法名函数名就会发生冲突已经命名的不能重复命名解决方法给每个文件类型都设置成这样都是独立的了导入导出坑如果是用运行导入导出使用的关键分别为坑如果是用浏览器运行导入导出使用的关键分别为注意事项如果是用运行文件后的可以不写如果是浏览器运行导出的文件必须写后缀这里不包含打包工具处理哈可能有些打包工具会自动处理上述问题导出的时候可以整体用一个导出导出也可以在单个上用导出导入导出时需要使用到解构赋值简写的方式比较简便示例一导入时有命名冲突的可在导入方用起别名导出简写中支持的简写方式既是又是如果是用运行导出关键字为如果是浏览器运行导出的关键字为这是返回的男这是返回的中类的方法如果是用运行导入关键字为文件后的可以不写如果是浏览器运行导出的关键字为文件后的必须写如果有命名冲突的可以再导入方起个别名示例二导出时一个文件最多可以定义一个匿名的导出由导入方定义名称导出的时候也可以通过起别名导入的时候可以用把暴露的接口都整合在一个对象中使用时直接用这个对象来操作匿名的导出方不需要定义名称导入方自定义一个文件中只能有一个需要单独写这是返回的男中类的方法导入方自定义中的匿名函数需要单独写一个不能放在中导入中暴露出来的接口并起个别名为").trim().substring(0, 1000);
      let value = Math.floor(Math.random() * 3) + 1000;
      while (value === prevParam || truncateDescription.length - value === prevParam) {
        value = Math.floor(Math.random() * 3) + 1000;
      }
      aiTitleRefreshIcon.style.opacity = "0.2";
      aiTitleRefreshIcon.style.transitionDuration = "0.3s";
      aiTitleRefreshIcon.style.transform = "rotate(" + 360 * refreshNum + "deg)";
      if (truncateDescription.length <= 1000) {
        let param = truncateDescription.length - Math.floor(Math.random() * 3);
        while (param === prevParam) {
          param = truncateDescription.length - Math.floor(Math.random() * 3);
        }
        aiAbstract(param);
        prevParam = param;
      } else {
        aiAbstract(value);
        prevParam = value;
      }
      refreshNum++;
    }
  }

  //- 监听tag点击事件
  document.getElementById("ai-tag").addEventListener("click", () => {
    if (mode === "tianli") {
      document.querySelectorAll(".ai-btn-item").forEach(item => item.style.display = "none");
      document.getElementById("go-tianli-blog").style.display = "block";
      startAI("你好，我是Tianli开发的摘要生成助理TianliGPT，是一个基于GPT-4的生成式AI。我在这里只负责摘要的预生成和显示，你无法与我直接沟通，如果你也需要一个这样的AI摘要接口，可以在下方购买。（暂未开放购买，敬请期待）")
    } else {
      document.getElementById("go-tianli-blog").style.display = "none";
      startAI("你好，我是本站摘要生成助理AnZhiYu GPT，是一个基于GPT-4的生成式AI。我在这里只负责摘要的预生成和显示，你无法与我直接沟通。")
    }

  });

  aiTitleRefreshIcon.addEventListener("click", () => {
    const truncateDescription = ("" + "简介, 参考资料, ECMAScript 6语法和应用, ECMAScript和 JavaScrip的关系, 版本记录, letampconst, 简介, 缺陷, var可以重复声明, var无法限制修改, 变量提升, 解决方法（闭包amplet）, 示例一, 示例二, 示例三（let）, const, 总结, let, const, 对比, 箭头函数, 简介, 示例一（箭头函数基本使用）, 示例二（数组排序）, 示例三（箭头函数返回对象）, 示例四（构造方法）, 关于箭头函数中的this的指向, 简介, 示例一, 示例二, 示例三, 数组新方法, 常用新增方法, 示例一, 示例二, 示例三, 数据结构集合, set, 简介, 示例, map, 简介, 示例, 字符串新功能, 判断开头与结尾, 模板字符串, 解构赋值, 简介, 基础的解构, 复杂的解构, 扩展运算符, 简介, 数组展开放入, 参数传递, class, 简介, 对比, 继承, JSON, 简介, 简写, 串行化、 反串行化, Module模块化, 简介, 冲突示例, 导入导出, 示例一, 示例二简介简称是语言的下一代标准已经在年月正式发布其目标为使可以用来编写复杂的大型应用程序成为企业级开发语言参考资料语法和应用花费年时间敲定是一个很大的发行版认识函数的参数兼容性解决解构赋值和的用法箭头函数的新应用数组的新增方法模块数据结构的一些新特性介绍字符串和新增方法和模版字符串和的关系是的缩写中文称欧洲计算机制造联合会这个组织的目标是评估开发和认可电信和计算机标准是标准是实现类似是标准都是实现目的是让所有前端脚本都实现目前只有实现标准简称或目前版本高级浏览器支持低级浏览器主要支持版本记录时间版本说明年月的创造者公司将提交给标准化组织年发布号标准文件规定了浏览器脚本语言的标准并将这种语言称为年内容编辑加工没有特性修改年有较完善的修改成为的通行标准得到了广泛支持年年终止也称作因改动太大没有通过项目启动来跟进大部分内容被继承部分内容放到之后年新功能主要包括对象包含等方法和增加一些方法严格模式函数的方法年成为国际标准到了年底主流浏览器都支持的全部功能年做了大量的更新但向后兼容是一次重大改进部分功能变量的解构赋值箭头函数年新功能主要包括检查数组中是否存在值区别字符串的方法求幂运算等价于年部分功能函数参数列表和调用中的尾逗号异步函数年现在已经可用了新增异步迭代属性正则表达式命名捕获组正则表达式反向断言非转义序列的模板字符串简介为什么新增关键字声明变量因为最起初设计是写一写小的项目当时没有考虑的很全面后面使用的人多了声明变量就暴露了它的缺陷缺陷可以重复声明重复声明无法限制修改无法限制修改没有块级作用域块内块内这里没有限制代码块中变量的作用域其实是希望这里没办法使用到变量阿达这里在块内的赋值修改了块外的变量期望的是块内打印的是阿达块外打印的是没有限制修改变量提升不支持变量提升不管放在哪里定义都会把语句提升到最前面支持变量提升不支持变量提升解决方法闭包以前的解决方法是通过闭包的方式解决在块级中没有作用域但是在方法中有作用域示例一需求块内输出块内自己的变量值块外输出块外的变量值闭包中的输出阿达括号中的值是方法中传递的参数变量的输出示例二需求有个按钮每次点击打印对应的按钮序号按钮一按钮二按钮三按钮四按钮五按钮添加监听事件按钮一按钮二按钮三按钮四按钮五按钮添加监听事件示例三按钮一按钮二按钮三按钮四按钮五按钮添加监听事件限制修改常量方式总结以后都不用如果变量需要修改就用如果变量不希望修改就用定义为常量箭头函数定义的方法用对象用普通变量和数组用我的个人习惯新增和命令用来声明变量用法类似于声明的变量只在命令所在的代码块內有效命令不存在变量提升命令不允许在相同作用域内重复声明同一个变量拥有的特性也拥有不可以像一样分步声明例如因为的值不可改变一旦定义了就不能修改所以后面也不能进行赋值了命令声明一个只读的常量一旦声明常量的值就不能改变命令声明的常量不得改变值即一旦声明就必须立即初始化命令声明的常量只在声明所在的块级作用域内有效命令声明的常量不提升只能在声明的位置后使用命令声明的常量与一样不可重复声明命令声明的复合类型的数据主要是对象和数组变量指向的内存地址定义的基本类型不可修改复合类型对象数组也不可以修改复合类型的属性是可以修改的直接修改基本类型或者复合类型相当于修改栈内存中的地址是不允许的修改复合类型对象的属性其实是修改该类型指向堆内存中的属性不受影响定义的常量不可修改对象也不可以修改对象的属性是可以修改的张三男这个是支持的因为修改的是对象在堆里面的值李四男不支持因为是重新创建了一个堆的对象李四男然后赋值给栈里面的所以不可修改栈内存对比不可修改可以理解常量中的可以修改可以理解为变量箭头函数简介允许使用箭头定义不需要参数或需要多个参数就用圆括号代代码块部分多于一条语句就用大括号括起来并且用返回箭头函数返回对象时必须在对象外面加上括号箭头函数使得表达更加简洁箭头函数能够简化回调函数箭头函数类似于中的表达式示例一箭头函数基本使用基本规则把换成把放在参数和的中间如果只有一个参数等号和箭头中间写形参名如果大括号代码块内只有一条语句不用写和大括号这里是同时都不写和大括号一般是成对出现的有大括号一般都有如果有大括号里面哪怕只有一条语句也要加上不然调用该方法的时候会出现如果有多个参数或者没有参数也必须要用来定义参数列表没有参数的时候括号内就空着第一次演变把换成把放在参数和的中间第二次演变如果只有一个参数等号和箭头中间写形参名如果大括号代码块内只有一条语句不用写和大括号第三次演变如果有多个参数或者没有参数也必须要用来定义参数列表没有参数的时候括号内就空着第四次演变没有参数也要用括号来定义参数列表方法体内只有一条语句不用加大括号和关键字示例二数组排序方法的演变还是和上面示例一相同把换成把放在参数和的中间箭头函数的函数体只有一条语句不用加和数组升序排列从小到大表示从小到大表示从大到小箭头函数数组降序序排列从大到小表示从大到小示例三箭头函数返回对象返回的对象需要用法大括号包裹起来和箭头函数的大括号有冲突所以可通过外面包裹一层大括号或者用小括号包括返回的对象不能直接像上面那样只有一条语句连对象的大括号都不写对象需要用大括号包裹的不然工具就会报错方式一箭头函数返回对象时语法返回的对象内容如果只写里面的对象的括号语法会以为是箭头函数的大括号阿达方式二其实我们只有一条语句不想写语句就用小括号括住返回的对象返回的对象示例四构造方法箭头函数没有构造方法因此不能用箭头函数定义一个方法然后还去这个方法控制台会提示不是一个构造方法因为是用箭头函数定义的箭头函数没有构造方法关于箭头函数中的的指向简介普通函数的指向它的调用者如果没有调用者则默认指向箭头函数的指向箭头函数定义时所处的对象而不是箭头函数使用时所在的对象默认使用父级的综上箭头函数没有自己的它的是继承而来默认指向在定义它时所处的对象宿主对象上面三条看起很懵没关系接着看下面的两个示例看完再回来理解这三条的含义示例一普通函数谁调用这个方法就代表谁没有人调用直接运行就代表最大的对象箭头函数跟调用者无关指向的是函数定义时所处的对象可以理解为父级的对象如果父级没有就再往上找最后是到对象下图中的定义在对象该对象直接是在里面定义的因此上下文的就是所以无论怎么调用都会指向对象定义了一个对象里面代码块的形式定义了一个方法定义的方法语法有点类似格式用这个对象调用运行就会指向它的调用者也就会是这个没有对象调用直接用运行就会指向对象对象代码块箭头函数的形式定义了一个方法定义的方法语法有点类似格式用这个对象调用运行指向箭头函数定义时所处的对象而不是箭头函数使用时所在的对象默认使用父级的示例二再次强调普通函数的指向和调用者有关下面的内容主要是针对示例一更加直观的解释指向问题普通函数左侧代码大致的意思是定义了一个设置了属性当发生点击时添加新的样式进来右侧是把添加新样式的方法写在了里面等待三秒因为是的对象所以调用者不是因此无法改变颜色通过对比来阐述普通函数对象指向的是调用者示例三本内容是对示例二中添加了函数无法改变颜色获取我们期望的对象做修复普通函数就在前获取对象命名为此时的指向的是对象再用这个调用就相当于用调用普通函数指向和调用者有关箭头函数与调用者无关指向箭头函数定义时所处的对象此时的是把赋给用上面赋值的调用就相当于用调用箭头函数指向和调用者无关指向箭头函数定义时所处的对象数组新方法常用新增方法过滤器过滤掉不符合条件的数据映射把数据映射到新的对象中汇总统计求和数组中有一个为真就返回真待补充判断时候用数组中有全部为真才返回真待补充判断时候用需求有一批商品现在要做促销活动把价格大于等于的商品打折后计算此次促销会少赚多少钱通过该需求进行高级函数的演示示例一示例一中将用以前原始的写法进行实现需求语法可以了解一下需求有一批商品现在要把大于或等于元的商品促销打折处理过滤元的商品把过滤的商品打折列出促销产品打折前后的价格计算此次促销少赚多少钱步骤一定义了一个空的数组用于存放的商品价格过滤该语法相当于会去循环数组循环的次数就是数组的长度是每次循环对应下标的值步骤二定义了一个空的数组用于存放的商品价格打折以后的价格打折定义两个数组用于存放促销商品打折前后的价格步骤三促销产品打折前价格步骤三促销产品打折后价格促销产品原始总价促销产品打折后总价少盈利示例二示例二中采用中新增的高级方法实现需求有一批商品现在要把大于或等于元的商品促销打折处理过滤元的商品把过滤的商品打折列出促销产品打折前后的价格计算此次促销少赚多少钱步骤一过滤的商品价格参数为每次遍历数组后的结果当布尔表达式才返回到数组中步骤二打折后映射到新的数组中参数为每次遍历数组后的结果打折后返回至中有两个参数给了一个初始值就是后面的不给值默认也是遍历数组中的每一个对象值第一次中第一个元素后第二次后第三次后步骤三促销产品打折前价格步骤三促销产品打折后价格促销产品原始总价促销产品打折后总价少盈利示例三在示例二的基础上进行链式编程方式更加优雅的实现需求有一批商品现在要把大于或等于元的商品促销打折处理过滤元的商品把过滤的商品打折列出促销产品打折前后的价格计算此次促销少赚多少钱促销产品打折前价格采用链式编程过滤映射汇总这两个其实都是一样的故意用两种写法因为箭头函数中只有一条语句可写可不写如果不传参默认就是如果传参的话写在箭头函数的后面用逗号分割参数促销产品打折后价格采用链式编程过滤映射汇总促销产品原始总价促销产品打折后总价少盈利数据结构集合简介集合和的集合差不多集合中只能存放值没有键相同的值只能存储一个一个集合中可以同时存放不同的数据类型比如整型字符串数组等示例常用方法添加数据添加数据重复数据是无效的测试判断集合中是否有返回的是一个布尔值删除集合中等于的值删除成功返回删除失败返回这里面没有就会删除失败返回两种遍历方式遍历结果清空集合获取集合大小简介也和的差不多通过键值对存储数据结构类似于对象是键值对的集合传统的键只能用字符串的键不限于字符串各种类型的值包括对象都可以当作键属性和操作方法属性返回结构的成员总数方法设置方法设置键名对应的键值为然后返回整个结构如果已经有值则键值会被更新否则就新生成该方法读取对应的键值如果找不到返回方法返回一个布尔值表示某个键是否在当前对象之中方法删除某个键返回如果删除失败返回方法清除所有成员没有返回值遍历返回键名的遍历器返回键值的遍历器返回所有成员的遍历器遍历的所有成员示例常用方法重复的会覆盖上面输出的下面输出的阿达阿达遍历和的一样一样的删除判断是否有获取大小字符串新功能判断以什么字符串开头判断以什么字符串结尾模板字符串判断开头与结尾域名前面部分域名后面部分是一个标准的开头结尾的域名上面注释的是普通字符串拼接的变量下面是用模板字符串引用变量是一个标准的开头结尾的域名不是一个标准的开头结尾的域名模板字符串模板字符串定义字符引用变量支持换行这是标题这是标语里面还可以拼接标签这使用方法换行会直接换行模板字符串中直接引用变量不需要用加号隔开换行也会自动用加号拼接最后打印都是一行字符串拼接解构赋值简介解构赋值序列解包注意事项结构构必须一样比如数组两边都需要用数组对象男接受的参数个数不能操作数据的长度可以少当少于长度时按照从左到右顺序解构解构赋值不能像定义变量一样分开声明和赋值例如基础的解构男等号右边可以是引用的数组也可以直接显示声明数组两边的结构保持一致都是数组接受的参数个数可以小于数组的长度不能超出长度直接显示声明对象结构的是按照取得所有参数名和对象中的要一致顺序无所谓男复杂的解构这种复杂的一般比较少不常用先确定外层结构两边保持一至内层结构中有对象数组的那么用对象名来二次结构对象的数组中又有对象用对象名对象名较为复杂的组合结构先确定外层结构两边保持一至内层结构中有对象数组的那么用对象名来二次结构对象的数组中又有对象用对象名对象名字符串字符串字符字符小明扩展运算符简介三点运算符展开数组默认参数和中的可变参数一样数组展开放入先展开数组然后按照所在位置存入数组中三个点展开数组然后放进数组中参数传递如果方法中有自定义的参数和需要可变参数可变参数需要放在最后一个形参中调用方法是作为参数传递方法中只需要个参数就会取数组中的前个值方法中用作为可变参数传进来的会当成一个数组处理也可根据的下标取值测试男如果方法中有自定义的参数和需要可变参数可变参数需要放在最后一个形参中定义的中有个参数和一个可变参数调用的时候只传了一个和一个展开的数组展开的数组的第一个就会赋给剩下的给可变参数的值为的值为的值为字符简介之前叫做基于对象新增了类的概念可以说是面向对象的是构造方法关键字代表实例对象通过关键字实现继承关键字表示父类的构造函数用来新建父类的对象对比通过截图中左右两段代码可看出来的定义类方法构造方法层次更加清晰前既是构造函数又是方法我是跑起来吧男构造方法关键字我是后面跑起来了阿达男性继承继承通过关键字实现子类如果重写了父类的方法调用的是子类自己的方法子类的方法中如果需要调用父类的其它方法可以使用这种方式我是父类的后面跑起来了子类的构造方法因为我们子类只新增了一个参数那么可以用之前的可变参数优雅在子类的构造方法中调用父类的构造方法后再把新增的也给初始化子类重写父类的对象方法我是子类的十八线学校阿达男性简介串行化反串行化简写属性和值名字一样可以简写方法一样可以简写省简写男阿达简写简写既是键又是值的引用不行因为对象的叫变量名叫男对象里面再套一个方法简写为男串行化反串行化串行化对象转成字符串反串行化格式的字符串转成对象里面再套一个方法简写为男会输出此时的已经被串行成了字符串没有的属性这一句就会报错因为上面串行化的时候已经丢失了的方法模块化简介模块化优点减少命名冲突避免引入时的层层依赖可以提升执行效率命令用于规定模块的对外接口一个模块就是一个独立的文件该文件内部的所有变量外部无法获取如果你希望外部能够读取模块内部的某个变量就必须使用关键字输出该变量命令用于输入其他模块提供的功能命令接受一对大括号里面指定要从其他模块导入的变量名大括号里面的变量名必须与被导入模块对外接口的名称相同冲突示例当我们在中引入的时多个存在重复的变量名方法名函数名就会发生冲突已经命名的不能重复命名解决方法给每个文件类型都设置成这样都是独立的了导入导出坑如果是用运行导入导出使用的关键分别为坑如果是用浏览器运行导入导出使用的关键分别为注意事项如果是用运行文件后的可以不写如果是浏览器运行导出的文件必须写后缀这里不包含打包工具处理哈可能有些打包工具会自动处理上述问题导出的时候可以整体用一个导出导出也可以在单个上用导出导入导出时需要使用到解构赋值简写的方式比较简便示例一导入时有命名冲突的可在导入方用起别名导出简写中支持的简写方式既是又是如果是用运行导出关键字为如果是浏览器运行导出的关键字为这是返回的男这是返回的中类的方法如果是用运行导入关键字为文件后的可以不写如果是浏览器运行导出的关键字为文件后的必须写如果有命名冲突的可以再导入方起个别名示例二导出时一个文件最多可以定义一个匿名的导出由导入方定义名称导出的时候也可以通过起别名导入的时候可以用把暴露的接口都整合在一个对象中使用时直接用这个对象来操作匿名的导出方不需要定义名称导入方自定义一个文件中只能有一个需要单独写这是返回的男中类的方法导入方自定义中的匿名函数需要单独写一个不能放在中导入中暴露出来的接口并起个别名为").trim().substring(0, 1000);
    let value = Math.floor(Math.random() * 3) + 1000;
    while (value === prevParam || truncateDescription.length - value === prevParam) {
      value = Math.floor(Math.random() * 3) + 1000;
    }
    aiTitleRefreshIcon.style.opacity = "0.2";
    aiTitleRefreshIcon.style.transitionDuration = "0.3s";
    aiTitleRefreshIcon.style.transform = "rotate(" + 360 * refreshNum + "deg)";
    if (truncateDescription.length <= 1000) {
      let param = truncateDescription.length - Math.floor(Math.random() * 3);
      while (param === prevParam) {
        param = truncateDescription.length - Math.floor(Math.random() * 3);
      }
      aiAbstract(param);
      prevParam = param;
    } else {
      aiAbstract(value);
      prevParam = value;
    }
    showAiBtn();
    refreshNum++;
  });

  document.getElementById("go-tianli-blog").addEventListener("click", () => {
    window.open("https://afdian.net/item/886a79d4db6711eda42a52540025c377", "_blank");
  });
  
  if (false) {
    document.getElementById("ai-Toggle").addEventListener("click", () => {
      changeShowMode()
    });
  }

  function showAiBtn() {
    document.querySelectorAll(".ai-btn-item").forEach(item => {
      if (item.id !== "go-tianli-blog") {
        item.style.display = "block";
      }
      if (item.id === "go-tianli-blog") {
        item.style.display = "none";
      }
    });
  }


  aiAbstract();
  showAiBtn()
})()</script></div><article class="post-content" id="article-container"><h1 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h1><p>ECMAScript 6.0，简称ES6，是JavaScript语言的下一代标准，已经在2015年6月正式发布。其目标为使JavaScript可以用来编写复杂的大型应用程序，成为企业级开发语言。</p>
<span id="more"></span>

<h3 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h3><div style="position: relative; width: 100%; height: 0; padding-bottom: 75%;"><iframe src="//player.bilibili.com/player.html?aid=586217027&bvid=BV1Pz4y1S7Uv&cid=283046856&page=28" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" style="position: absolute;width: 100%;height: 100%;left: 0;top: 0;"> </iframe></div>

<h1 id="ECMAScript-6语法和应用"><a href="#ECMAScript-6语法和应用" class="headerlink" title="ECMAScript 6语法和应用"></a>ECMAScript 6语法和应用</h1><ul>
<li>ECMAScript 2015 花费6年时间敲定,是一个很大的发行版</li>
<li>认识ES6</li>
<li>函数的参数</li>
<li>ES6兼容性解决</li>
<li>解构赋值</li>
<li>let和 const</li>
<li>Classl的用法</li>
<li>箭头函数</li>
<li>JSON的新应用</li>
<li>数组的新增方法</li>
<li>Module模块</li>
<li>Map数据结构</li>
<li>ES7-ES11的一些新特性介绍</li>
<li>字符串和新增方法和模版字符串</li>
</ul>
<h1 id="ECMAScript和-JavaScrip的关系"><a href="#ECMAScript和-JavaScrip的关系" class="headerlink" title="ECMAScript和 JavaScrip的关系"></a>ECMAScript和 JavaScrip的关系</h1><ul>
<li><p>ECMA是“European Computer Manufacturers Association”的缩写,中文称欧洲计算机制造联合会。这个组织的目标是评估,开发和认可电信和计算机标准。</p>
</li>
<li><p>ECMA是标准, JavaScript是实现</p>
<ul>
<li>类似HTML5是标准,IE10、 Chrome、FF都是实现</li>
<li>目的是让所有前端脚本都实现ECMA</li>
<li>目前只有 JavaScript实现ECMA标准, ECMAScript≈Js</li>
</ul>
</li>
<li><p>ECMAScript简称ECMA或ES(ES6)</p>
</li>
<li><p>目前版本</p>
<ul>
<li>高级浏览器支持ES6</li>
<li>低级浏览器主要支持ES3.1</li>
</ul>
</li>
</ul>
<h1 id="版本记录"><a href="#版本记录" class="headerlink" title="版本记录"></a>版本记录</h1><table>
<thead>
<tr>
<th><strong>时间</strong></th>
<th><strong>版本</strong></th>
<th><strong>说明</strong></th>
</tr>
</thead>
<tbody><tr>
<td>1996 年 11月</td>
<td></td>
<td>JavaScript 的创造者 Netscape 公司将 JavaScript 提交给标准化组织 ECMA。</td>
</tr>
<tr>
<td>1997年</td>
<td>ES1</td>
<td>ECMA 发布 262 号标准文件（ECMA-262），规定了浏览器脚本语言的标准，并将这种语言称为 ECMAScript (ES).</td>
</tr>
<tr>
<td>1998年</td>
<td>ES2</td>
<td>内容编辑加工，没有特性修改。</td>
</tr>
<tr>
<td>1999年</td>
<td>ES3</td>
<td>有较完善的修改，成为JavaScript的通行标准，得到了广泛支持。</td>
</tr>
<tr>
<td>2000年</td>
<td>ES4</td>
<td>2008年终止也称作JavaScript 2，因改动太大没有通过，Harmony项目启动来跟进，ES4大部分内容被 ES6 继承. Harmony部分内容放到ES6之后。</td>
</tr>
<tr>
<td>2009年</td>
<td>ES5(ES3.1)</td>
<td>新功能主要包括：JSON对象（包含parse&#x2F;stringify等方法）、Array和Object增加一些方法，严格模式（use strict），函数的bind方法。</td>
</tr>
<tr>
<td>2011年</td>
<td>ES5.1</td>
<td>成为 ISO 国际标准（ISO&#x2F;IEC 16262:2011)， 到了2012年底，主流浏览器都支持ECMAScript 5.1的全部功能</td>
</tr>
<tr>
<td>2015年</td>
<td>ES2015(ES6)</td>
<td><code>做了大量的更新，但向后兼容。ES6是一次重大改进。 部分功能：let/const、变量的解构赋值、Promise、箭头函数…</code></td>
</tr>
<tr>
<td>2016年</td>
<td>ES2016(ES7)</td>
<td>新功能主要包括： 1. Array.prototype.includes检查数组中是否存在值；（区别ES6字符串的includes方法） 2. Exponentiation Operator 求幂运算 (a ** b等价于Math.pow(a,b))</td>
</tr>
<tr>
<td>2017年</td>
<td>ES2017(ES8)</td>
<td>部分功能： 1.Object.values&#x2F;entries&#x2F;getOwnPropertyDescriptors 2.String.prototype.padStart&#x2F;padEnd 3.函数参数列表和调用中的尾逗号（Trailing commas） 4.Async Functions 异步函数（async&#x2F;await）</td>
</tr>
<tr>
<td>2018年</td>
<td>ES2018(ES9)</td>
<td>现在已经可用了。新增异步迭代、Promise.finally()、Rest&#x2F;Spread 属性、正则表达式命名捕获组、正则表达式反向断言、非转义序列的模板字符串……</td>
</tr>
</tbody></table>
<h1 id="let-const"><a href="#let-const" class="headerlink" title="let&amp;const"></a>let&amp;const</h1><h2 id="简介-1"><a href="#简介-1" class="headerlink" title="简介"></a>简介</h2><ul>
<li>为什么ES6新增 let 关键字声明变量：因为最起初 JavaScript 设计是写一写小的项目，当时没有考虑的很全面，后面使用的人多了，var 声明变量就暴露了它的缺陷</li>
</ul>
<h2 id="缺陷"><a href="#缺陷" class="headerlink" title="缺陷"></a>缺陷</h2><h3 id="var可以重复声明"><a href="#var可以重复声明" class="headerlink" title="var可以重复声明"></a>var可以重复声明</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-handlebars"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">    <span class="comment">&lt;!--    重复声明--&gt;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">    var a = 10;</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">    var a = 20;</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">    a = 35;</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">    console.log(a)</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"></span></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://automation-manage.oss-cn-shanghai.aliyuncs.com/blog/image-20220224222411594.png" alt="var重复声明"></p>
<h3 id="var无法限制修改"><a href="#var无法限制修改" class="headerlink" title="var无法限制修改"></a>var无法限制修改</h3><ul>
<li>var无法限制修改</li>
<li>var没有块级作用域{}  if(){块内}  for(){块内}</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> a = <span class="number">18</span>;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(a);</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(a);     <span class="comment">//这里没有限制代码块中变量 a 的作用域，其实是希望这里没办法使用到变量 a</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> name = <span class="string">&quot;ada&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">if</span> (<span class="literal">true</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> name = <span class="string">&quot;阿达&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(name);</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(name);  <span class="comment">//这里在 if 块内的赋值修改了 if 块外的 name 变量，期望的是 if 块内打印的是【阿达】，块外打印的是 【ada】 没有限制修改</span></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://automation-manage.oss-cn-shanghai.aliyuncs.com/blog/image-20220224223940737.png" alt="未限制修改和没有块级作用域"></p>
<h3 id="变量提升"><a href="#变量提升" class="headerlink" title="变量提升"></a>变量提升</h3><ul>
<li>let 不支持变量提升</li>
<li>var 不管放在哪里定义 都会把 var 语句提升到最前面</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-handlebars"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">    <span class="comment">&lt;!--    var 支持变量提升--&gt;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">    a = 10;</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">    console.log(a);</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">    var a;</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"></span></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>





<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-handlebars"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">    <span class="comment">&lt;!--    let 不支持变量提升--&gt;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">    a = 10;</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">    console.log(a);</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">    let a;</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"></span></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>



<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://automation-manage.oss-cn-shanghai.aliyuncs.com/blog/image-20220224233950854.png" alt="变量提升"></p>
<h2 id="解决方法（闭包-let）"><a href="#解决方法（闭包-let）" class="headerlink" title="解决方法（闭包&amp;let）"></a>解决方法（闭包&amp;let）</h2><ul>
<li>ES6 以前的解决方法是通过<code>闭包</code>的方式解决</li>
<li><code>var 在块级中没有作用域但是在方法中有作用域</code></li>
</ul>
<h3 id="示例一"><a href="#示例一" class="headerlink" title="示例一"></a>示例一</h3><ul>
<li>需求：块内输出块内自己的变量值，块外输出块外的变量值</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> name = <span class="string">&quot;ada&quot;</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">if</span> (<span class="literal">true</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        (<span class="keyword">function</span> (<span class="params">nameStr</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> name = nameStr;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;闭包中的输出：&quot;</span> + name);</span></span><br><span class="line"><span class="language-javascript">        &#125;)(<span class="string">&quot;阿达&quot;</span>);   <span class="comment">// 括号中的值是方法中 nameStr 传递的参数</span></span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;变量 var 的输出&quot;</span> + name);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://automation-manage.oss-cn-shanghai.aliyuncs.com/blog/image-20220224225629511.png" alt="示例一"></p>
<h3 id="示例二"><a href="#示例二" class="headerlink" title="示例二"></a>示例二</h3><ul>
<li>需求：有 5 个按钮，每次点击打印对应的按钮序号</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span>&gt;</span>按钮一<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span>&gt;</span>按钮二<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span>&gt;</span>按钮三<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span>&gt;</span>按钮四<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span>&gt;</span>按钮五<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//按钮添加监听事件</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> btns = <span class="variable language_">document</span>.<span class="title function_">getElementsByTagName</span>(<span class="string">&quot;button&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; btns.<span class="property">length</span>; i++) &#123;</span></span><br><span class="line"><span class="language-javascript">        btns[i].<span class="title function_">addEventListener</span>(<span class="string">&quot;click&quot;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">log</span>(i);</span></span><br><span class="line"><span class="language-javascript">        &#125;);</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>





<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span>&gt;</span>按钮一<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span>&gt;</span>按钮二<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span>&gt;</span>按钮三<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span>&gt;</span>按钮四<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span>&gt;</span>按钮五<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//按钮添加监听事件</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> btns = <span class="variable language_">document</span>.<span class="title function_">getElementsByTagName</span>(<span class="string">&quot;button&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; btns.<span class="property">length</span>; i++) &#123;</span></span><br><span class="line"><span class="language-javascript">        (<span class="keyword">function</span> (<span class="params">i</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            btns[i].<span class="title function_">addEventListener</span>(<span class="string">&quot;click&quot;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">console</span>.<span class="title function_">log</span>(i);</span></span><br><span class="line"><span class="language-javascript">            &#125;);</span></span><br><span class="line"><span class="language-javascript">        &#125;)(i)</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>



<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://automation-manage.oss-cn-shanghai.aliyuncs.com/blog/image-20220224231308389.png" alt="示例二"></p>
<h3 id="示例三（let）"><a href="#示例三（let）" class="headerlink" title="示例三（let）"></a>示例三（let）</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span>&gt;</span>按钮一<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span>&gt;</span>按钮二<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span>&gt;</span>按钮三<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span>&gt;</span>按钮四<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span>&gt;</span>按钮五<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//按钮添加监听事件</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">let</span> btns = <span class="variable language_">document</span>.<span class="title function_">getElementsByTagName</span>(<span class="string">&quot;button&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; btns.<span class="property">length</span>; i++) &#123;</span></span><br><span class="line"><span class="language-javascript">        btns[i].<span class="title function_">addEventListener</span>(<span class="string">&quot;click&quot;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">log</span>(i);</span></span><br><span class="line"><span class="language-javascript">        &#125;);</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>



<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://automation-manage.oss-cn-shanghai.aliyuncs.com/blog/image-20220224232209558.png" alt="示例三"></p>
<h2 id="const"><a href="#const" class="headerlink" title="const"></a>const</h2><ul>
<li>限制修改（常量方式）</li>
</ul>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><ul>
<li>以后都不用 var</li>
<li>如果变量需要修改就用 let</li>
<li>如果变量不希望修改就用 const 定义为常量</li>
<li>箭头函数定义的方法用 const 对象用 const 普通变量和数组用 let（我的个人习惯）</li>
</ul>
<h3 id="let"><a href="#let" class="headerlink" title="let"></a>let</h3><ul>
<li>ES6 新增 let 和 const 命令,用来声明变量,用法类似于 var</li>
<li>let 声明的变量,只在 let 命令所在的代码块內有效</li>
<li>let 命令不存在变量提升</li>
<li>let 命令不允许在相同作用域内,重复声明同一个变量</li>
</ul>
<h3 id="const-1"><a href="#const-1" class="headerlink" title="const"></a>const</h3><ul>
<li>let 拥有的特性 const 也拥有</li>
<li>const 不可以像 let 一样分步声明，例如： let a; a&#x3D;10;  因为 const 的值不可改变，一旦定义了就不能修改，所以后面也不能进行赋值了</li>
<li>const 命令声明一个只读的常量。一旦声明,常量的值就不能改变</li>
<li>const 命令声明的常量不得改变值。即一旦声明就必须立即初始化。</li>
<li>const 命令声明的常量,只在声明所在的块级作用域内有效</li>
<li>const 命令声明的常量不提升,只能在声明的位置后使用</li>
<li>const 命令声明的常量,与let一样不可重复声明</li>
<li>const 命令声明的<code>复合类型的数据</code>(主要是对象和数组),变量指向的内存地址</li>
<li><code>const定义的基本类型不可修改,复合类型（对象，数组）也不可以修改</code>,复合类型的<code>属性是可以修改</code>的 直接修改基本类型或者复合类型相当于修改栈内存中的地址是不允许的，修改复合类型对象的属性其实是修改该类型指向堆内存中的属性不受影响</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//const定义的常量不可修改,对象也不可以修改,对象的属性是可以修改的</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> obj =&#123;<span class="attr">name</span>:<span class="string">&#x27;张三&#x27;</span>,<span class="attr">age</span>:<span class="number">10</span>,<span class="attr">sex</span>:<span class="string">&#x27;男&#x27;</span>&#125;;</span><br><span class="line">obj.<span class="property">name</span>=<span class="string">&#x27;lisi&#x27;</span>;  <span class="comment">//这个是支持的,因为修改的是对象在堆里面的值</span></span><br><span class="line">obj=&#123;<span class="attr">name</span>:<span class="string">&#x27;李四&#x27;</span>,<span class="attr">age</span>:<span class="number">10</span>,<span class="attr">sex</span>:<span class="string">&#x27;男&#x27;</span>&#125;;  <span class="comment">//不支持,因为是重新创建了一个堆的对象&#123;name:&#x27;李四&#x27;,age:10,sex:&#x27;男&#x27;&#125;然后赋值给栈里面的obj所以不可修改(栈内存)</span></span><br></pre></td></tr></table></figure>

<h3 id="对比"><a href="#对比" class="headerlink" title="对比"></a>对比</h3><ul>
<li>const:不可修改（可以理解常量 java 中的 final）</li>
<li>let:可以修改，（可以理解为变量）</li>
</ul>
<h1 id="箭头函数"><a href="#箭头函数" class="headerlink" title="箭头函数"></a>箭头函数</h1><h2 id="简介-2"><a href="#简介-2" class="headerlink" title="简介"></a>简介</h2><ul>
<li>ES6 允许使用“箭头”（&#x3D;&gt;）定义</li>
<li>不需要参数或需要多个参数，就用圆括号代</li>
<li>代码块部分多于一条语句，就用大括号括起来，并且用return返回</li>
<li>箭头函数返回对象时，必须在对象外面加上括号</li>
<li>箭头函数使得表达更加简洁</li>
<li>箭头函数能够简化回调函数</li>
<li>箭头函数类似于 jdk8 中的 lamda 表达式</li>
</ul>
<h2 id="示例一（箭头函数基本使用）"><a href="#示例一（箭头函数基本使用）" class="headerlink" title="示例一（箭头函数基本使用）"></a>示例一（箭头函数基本使用）</h2><ul>
<li>基本规则：1.把 function 换成 &#x3D;&gt;  2.把 &#x3D;&gt; 放在参数和 {} 的中间</li>
<li>如果只有一个参数   &#x3D; <code>等号和箭头中间写形参名</code> &#x3D;&gt;</li>
<li>如果 { } 大括号代码块内只有一条语句不用写 <code>return 和大括号&#123; &#125; </code> 这里是同时都不写</li>
<li>return 和大括号{ }一般是成对出现的，有大括号一般都有 return，如果有大括号里面哪怕只有一条语句也要加上 return 不然调用该方法的时候会出现 undefined</li>
<li>如果有多个参数或者没有参数也必须要用 () 来定义参数列表，没有参数的时候括号内就空着</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">function</span> <span class="title function_">fun1</span>(<span class="params">a</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">return</span> a * a;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">fun1</span>(<span class="number">1</span>));</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> fun2 = <span class="keyword">function</span> (<span class="params">b</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">return</span> b * b;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">fun2</span>(<span class="number">2</span>));</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//第一次演变：1.把 function 换成 =&gt;  2.把 =&gt; 放在参数和 &#123;&#125; 的中间</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> <span class="title function_">fun3</span> = (<span class="params">c</span>) =&gt; &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">return</span> c * c;</span></span><br><span class="line"><span class="language-javascript">    &#125;;</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">fun3</span>(<span class="number">3</span>));</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//第二次演变：1.如果只有一个参数   = 等号和箭头中间写形参名 =&gt;   2.如果 &#123; &#125; 大括号代码块内只有一条语句不用写 return 和大括号&#123; &#125;</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> <span class="title function_">fun4</span> = d =&gt; d * d;</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">fun4</span>(<span class="number">4</span>));</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//第三次演变：如果有多个参数或者没有参数也必须要用 () 来定义参数列表，没有参数的时候括号内就空着</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> <span class="title function_">fun5</span> = (<span class="params">e, f, g</span>) =&gt; &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">let</span> add = e + f + g;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">return</span> add;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">fun5</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>));</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//第四次演变：1.没有参数也要用括号 () 来定义参数列表  2.方法体内只有一条语句不用加大括号 &#123; &#125; 和 return 关键字</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> <span class="title function_">fun6</span> = (<span class="params"></span>) =&gt; <span class="number">10</span> * <span class="number">10</span>;</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">fun6</span>());</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>



<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://automation-manage.oss-cn-shanghai.aliyuncs.com/blog/image-20220225130638912.png" alt="箭头函数基本使用"></p>
<h2 id="示例二（数组排序）"><a href="#示例二（数组排序）" class="headerlink" title="示例二（数组排序）"></a>示例二（数组排序）</h2><ul>
<li>方法的演变还是和上面示例一相同，1.把 function 换成 &#x3D;&gt;  2.把 &#x3D;&gt; 放在参数和 {} 的中间</li>
<li>箭头函数的函数体只有一条语句 不用加 { } 和 return</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">let</span> array = [<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">9</span>, <span class="number">15</span>, <span class="number">88</span>, <span class="number">99</span>];</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//数组升序排列 从小到大  i - j 表示从小到大  j - i 表示从大到小</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> asc = array.<span class="title function_">sort</span>(<span class="keyword">function</span> (<span class="params">i, j</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">return</span> i - j;</span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(asc);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//箭头函数数组降序序排列 从大到小  j - i 表示从大到小</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> desc = array.<span class="title function_">sort</span>(<span class="function">(<span class="params">i, j</span>) =&gt;</span> j - i);</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(desc);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>



<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://automation-manage.oss-cn-shanghai.aliyuncs.com/blog/image-20220225125918624.png" alt="数组排序"></p>
<h2 id="示例三（箭头函数返回对象）"><a href="#示例三（箭头函数返回对象）" class="headerlink" title="示例三（箭头函数返回对象）"></a>示例三（箭头函数返回对象）</h2><ul>
<li>返回的对象 obj 需要用法大括号包裹起来和箭头函数的大括号有冲突，所以可通过外面包裹一层 <code>大括号+return</code> 或者用<code>小括号</code>包括返回的对象</li>
<li>不能直接像上面那样只有一条语句连对象的大括号都不写，对象需要用大括号包裹的不然 IDE 工具就会报错</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//方式一：箭头函数返回对象时语法   &#123; return &#123;返回的对象内容&#125; &#125;    如果只写里面的对象的括号语法会以为是箭头函数的大括号</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> <span class="title function_">fun1</span> = id =&gt; &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">return</span> &#123;<span class="attr">id</span>: id, <span class="attr">name</span>: <span class="string">&quot;阿达&quot;</span>&#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;;</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">fun1</span>(<span class="number">10001</span>));</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">fun1</span>(<span class="number">10001</span>).<span class="property">id</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">fun1</span>(<span class="number">10001</span>).<span class="property">name</span>);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//方式二：其实我们只有一条语句不想写 return 语句，就用小括号括住返回的对象  ( &#123; 返回的对象 &#125; )</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> <span class="title function_">fun2</span> = (<span class="params">id, name</span>) =&gt; (&#123;<span class="attr">id</span>: id, <span class="attr">name</span>: name&#125;);</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">fun2</span>(<span class="number">10002</span>, <span class="string">&quot;adalucky&quot;</span>));</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">fun2</span>(<span class="number">10002</span>, <span class="string">&quot;adalucky&quot;</span>).<span class="property">id</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">fun2</span>(<span class="number">10002</span>, <span class="string">&quot;adalucky&quot;</span>).<span class="property">name</span>);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>



<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://automation-manage.oss-cn-shanghai.aliyuncs.com/blog/image-20220225210400086.png" alt="箭头函数返回对象"></p>
<h2 id="示例四（构造方法）"><a href="#示例四（构造方法）" class="headerlink" title="示例四（构造方法）"></a>示例四（构造方法）</h2><ul>
<li>箭头函数没有构造方法，因此不能用箭头函数定义一个方法然后还去 new 这个方法</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">function</span> <span class="title function_">demo1</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> fun1 = <span class="keyword">new</span> <span class="title function_">demo1</span>();</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(fun1);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> <span class="title function_">demo2</span> = (<span class="params"></span>) =&gt; &#123;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> fun2 = <span class="keyword">new</span> <span class="title function_">demo2</span>();</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 控制台会提示 Uncaught TypeError: demo2 is not a constructor    demo2不是一个构造方法，因为 dome2 是用箭头函数定义的，箭头函数没有构造方法</span></span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(fun2);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>



<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://automation-manage.oss-cn-shanghai.aliyuncs.com/blog/image-20220225211957942.png" alt="构造方法"></p>
<h2 id="关于箭头函数中的this的指向"><a href="#关于箭头函数中的this的指向" class="headerlink" title="关于箭头函数中的this的指向"></a>关于箭头函数中的this的指向</h2><h3 id="简介-3"><a href="#简介-3" class="headerlink" title="简介"></a>简介</h3><ul>
<li>普通函数的this：指向它的调用者，如果没有调用者则默认指向window.</li>
<li>箭头函数的this: 指向箭头函数定义时所处的对象，而不是箭头函数使用时所在的对象，默认使用父级的this.</li>
<li>综上：箭头函数没有自己的this，它的this是继承而来，默认指向在定义它时所处的对象(宿主对象)。</li>
<li>上面三条看起很懵，没关系接着看下面的两个示例看完再回来理解这三条的含义</li>
</ul>
<h3 id="示例一-1"><a href="#示例一-1" class="headerlink" title="示例一"></a>示例一</h3><ul>
<li>普通函数，谁调用这个方法，this 就代表谁，没有人调用直接运行就代表最大的 window 对象</li>
<li>箭头函数跟调用者无关，指向的是函数定义时所处的对象，可以理解为父级的 this 对象，如果父级没有，就再往上找，最后是到 window 对象</li>
<li>下图中 arrowThis2.html 的 fun1 定义在 adaThis2对象,该对象直接是在 window 里面定义的，因此上下文的 tihs 就是 window 所以无论怎么调用都会指向 window 对象</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//定义了一个对象 adaThis1 里面 代码块的形式定义了一个方法fun1</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//定义的方法语法有点类似 json 格式 f:f()&#123;&#125;</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> adaThis1 = &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">fun1</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>);</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;;</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//用 adaThis1 这个对象调用运行 fun1---&gt;</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// this 就会指向它的调用者 也就会是这个 adaThis1</span></span></span><br><span class="line"><span class="language-javascript">    adaThis1.<span class="title function_">fun1</span>();</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">function</span> <span class="title function_">fun2</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>);</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//没有对象调用，直接用运行 fun2() 就会指向 window 对象</span></span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">fun2</span>();</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>





<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//对象adaThis2 代码块箭头函数的形式定义了一个方法 fun1</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//定义的方法语法有点类似 json 格式 f:f()&#123;&#125;</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> adaThis2 = &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">fun1</span>: <span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>);</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//用 adaThis2 这个对象调用运行 fun1---&gt;</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//this 指向箭头函数定义时所处的对象，而不是箭头函数使用时所在的对象，默认使用父级的this</span></span></span><br><span class="line"><span class="language-javascript">    adaThis2.<span class="title function_">fun1</span>();</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>



<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://automation-manage.oss-cn-shanghai.aliyuncs.com/blog/image-20220225222600579.png" alt="this 指向示例一"></p>
<h3 id="示例二-1"><a href="#示例二-1" class="headerlink" title="示例二"></a>示例二</h3><ul>
<li>再次强调<code>普通函数的 this 指向和调用者有关</code></li>
<li>下面的内容主要是针对示例一更加直观的解释 this 指向问题（普通函数）</li>
<li>左侧代码大致的意思是定义了一个 box，设置了css 属性，当发生点击时添加新的样式进来，右侧是把添加新样式的方法写在了 setTimeout 里面等待三秒，因为 setTimeout 是 window 的对象，所以调用者不是 box 因此无法改变颜色，通过对比来阐述普通函数 this 对象指向的是调用者</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-id">#box</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">height</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">width</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">background</span>: red;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-id">#box</span><span class="selector-class">.newColor</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">background</span>: yellow;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;box&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> box = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;box&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    box.<span class="property">onclick</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>);</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="property">className</span> = <span class="string">&quot;newColor&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>





<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-id">#box</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">height</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">width</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">background</span>: red;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-id">#box</span><span class="selector-class">.newColor</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">background</span>: yellow;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;box&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> box = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;box&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    box.<span class="property">onclick</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="built_in">setTimeout</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>);</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">className</span> = <span class="string">&quot;newColor&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">        &#125;, <span class="number">3000</span>)</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>



<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://automation-manage.oss-cn-shanghai.aliyuncs.com/blog/image-20220225230434521.png" alt="this 指向示例二"></p>
<h3 id="示例三"><a href="#示例三" class="headerlink" title="示例三"></a>示例三</h3><ul>
<li>本内容是对示例二中添加了 setTimeout 函数无法改变颜色获取我们期望的对象做修复</li>
<li>普通函数就在 setTimeout 前获取 this 对象，命名为 obj，此时的 obj 指向的是 box 对象，再用这个 obj 调用就相当于用 box 调用 <code>普通函数 this 指向和调用者有关</code></li>
<li><code>箭头函数与调用者无关,指向箭头函数定义时所处的对象</code></li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-id">#box</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">height</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">width</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">background</span>: red;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-id">#box</span><span class="selector-class">.newColor</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">background</span>: yellow;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;box&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> box = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;box&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    box.<span class="property">onclick</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//此时的 this 是 box，把 this 赋给 obj</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">let</span> obj = <span class="variable language_">this</span>;</span></span><br><span class="line"><span class="language-javascript">        <span class="built_in">setTimeout</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>);</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">log</span>(obj);</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//用上面赋值的 obj 调用就相当于用 box 调用</span></span></span><br><span class="line"><span class="language-javascript">            obj.<span class="property">className</span> = <span class="string">&quot;newColor&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">        &#125;, <span class="number">3000</span>)</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>





<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-id">#box</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">height</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">width</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">background</span>: red;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-id">#box</span><span class="selector-class">.newColor</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">background</span>: yellow;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;box&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> box = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;box&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    box.<span class="property">onclick</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//箭头函数 this 指向和调用者无关，指向箭头函数定义时所处的对象</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>);</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">className</span> = <span class="string">&quot;newColor&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">        &#125;, <span class="number">3000</span>)</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>



<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://automation-manage.oss-cn-shanghai.aliyuncs.com/blog/image-20220225233944296.png" alt="this 指向示例三"></p>
<h1 id="数组新方法"><a href="#数组新方法" class="headerlink" title="数组新方法"></a>数组新方法</h1><h2 id="常用新增方法"><a href="#常用新增方法" class="headerlink" title="常用新增方法"></a>常用新增方法</h2><ul>
<li>filter   过滤器(过滤掉不符合条件的数据)</li>
<li>map      映射（把数据映射到新的对象中） </li>
<li>reduce   汇总（统计求和）</li>
<li>some()   数组中有一个为真就返回真—&gt;待补充（判断时候用）</li>
<li>every()  数组中有全部为真才返回真—&gt;待补充（判断时候用）</li>
<li>需求：有一批商品，现在要做促销活动，把价格大于等于 10 的商品打 5 折后计算此次促销会少赚多少钱 通过该需求进行 ES6 高级函数的演示</li>
</ul>
<h2 id="示例一-2"><a href="#示例一-2" class="headerlink" title="示例一"></a>示例一</h2><ul>
<li>示例一中将用以前<code>原始的写法</code>进行实现需求</li>
<li><code>let n of array 语法可以了解一下</code></li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//需求：有一批商品，现在要把大于或等于 10 元的商品促销打 5 折处理</span></span><br><span class="line"><span class="comment">// ①过滤 &gt;=10元的商品 ②把过滤的商品打 5 折 ③列出促销产品打折前后的价格 ④计算此次促销少赚多少钱</span></span><br><span class="line"><span class="keyword">let</span> goods = [<span class="number">10</span>, <span class="number">20</span>, <span class="number">3</span>, <span class="number">30</span>, <span class="number">2</span>, <span class="number">5</span>, <span class="number">90</span>, <span class="number">100</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> step1 = []; <span class="comment">//步骤一：定义了一个空的数组用于存放 &gt;= 10的商品价格（过滤）</span></span><br><span class="line"><span class="comment">//let n of goods  该语法相当于会去循环 goods 数组，循环的次数就是数组的长度，n 是每次循环对应下标的值</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> n <span class="keyword">of</span> goods) &#123;</span><br><span class="line">    <span class="keyword">if</span> (n &gt;= <span class="number">10</span>) &#123;</span><br><span class="line">        step1.<span class="title function_">push</span>(n);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(step1);</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> step2 = []; <span class="comment">//步骤二：定义了一个空的数组用于存放 &gt;= 10的商品价格打 5 折以后的价格（打折）</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> n <span class="keyword">of</span> step1) &#123;</span><br><span class="line">    step2.<span class="title function_">push</span>(n * <span class="number">0.5</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(step2);</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> beforeSum = <span class="number">0</span>;  <span class="comment">//定义两个数组用于存放促销商品打折前后的价格</span></span><br><span class="line"><span class="keyword">let</span> afterSum = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> n <span class="keyword">of</span> step1)&#123;</span><br><span class="line">    beforeSum += n; <span class="comment">//步骤三：促销产品打折前价格</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> n <span class="keyword">of</span> step2)&#123;</span><br><span class="line">    afterSum += n; <span class="comment">//步骤三：促销产品打折后价格</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;促销产品原始总价：&quot;</span>+beforeSum+<span class="string">&quot;,促销产品打折后总价：&quot;</span>+afterSum+<span class="string">&quot;,少盈利：&quot;</span>+(beforeSum-afterSum));</span><br></pre></td></tr></table></figure>



<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://automation-manage.oss-cn-shanghai.aliyuncs.com/blog/image-20220226014546374.png" alt="原始写法"></p>
<h2 id="示例二-2"><a href="#示例二-2" class="headerlink" title="示例二"></a>示例二</h2><ul>
<li>示例二中采用 ES6 中新增的高级方法 <code>filter</code> <code>map</code> <code>reduce</code> 实现</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//需求：有一批商品，现在要把大于或等于 10 元的商品促销打 5 折处理</span></span><br><span class="line"><span class="comment">// ①过滤 &gt;=10元的商品 ②把过滤的商品打 5 折 ③列出促销产品打折前后的价格 ④计算此次促销少赚多少钱</span></span><br><span class="line"><span class="keyword">let</span> goods = [<span class="number">10</span>, <span class="number">20</span>, <span class="number">3</span>, <span class="number">30</span>, <span class="number">2</span>, <span class="number">5</span>, <span class="number">90</span>, <span class="number">100</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> step1 = goods.<span class="title function_">filter</span>(<span class="keyword">function</span> (<span class="params">n</span>) &#123;</span><br><span class="line">    <span class="comment">//步骤一：过滤 &gt;= 10的商品价格,参数 n 为每次遍历数组 goods 后的结果，当 n &gt;=10（布尔表达式） 才返回到数组中</span></span><br><span class="line">    <span class="keyword">return</span> n &gt;= <span class="number">10</span>;     <span class="comment">// step1 = [ 10, 20, 30, 90, 100 ]</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(step1);</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> step2 = step1.<span class="title function_">map</span>(<span class="keyword">function</span> (<span class="params">n</span>) &#123;</span><br><span class="line">    <span class="comment">//步骤二：打折后映射到新的数组 step2 中，参数 n 为每次遍历数组 step1 后的结果,打 5 折后返回至 step2 中</span></span><br><span class="line">    <span class="keyword">return</span> n * <span class="number">0.5</span>; <span class="comment">//step2 = [ 5, 10, 15, 45, 50 ]</span></span><br><span class="line"></span><br><span class="line">&#125;)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(step2);</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> beforeSum = step1.<span class="title function_">reduce</span>(<span class="keyword">function</span> (<span class="params">s, n</span>) &#123;</span><br><span class="line">    <span class="comment">//有两个参数 s,n  s给了一个初始值就是后面的 0(不给值默认也是 0) ，n 遍历数组中的每一个对象值</span></span><br><span class="line">    <span class="comment">//第一次：s=0,n=10(step1中第一个元素)，return 后 s=10（s+=n -&gt; s=s+n),beforeSum=10;</span></span><br><span class="line">    <span class="comment">//第二次：s=10,n=20, return 后 s=30,beforeSum=30;  第三次：s=30,n=30,return 后 s=60,beforeSum=60</span></span><br><span class="line">    <span class="keyword">return</span> s += n; <span class="comment">//步骤三：促销产品打折前价格</span></span><br><span class="line">&#125;, <span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> afterSum = step2.<span class="title function_">reduce</span>(<span class="keyword">function</span> (<span class="params">s, n</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> s += n; <span class="comment">//步骤三：促销产品打折后价格</span></span><br><span class="line">&#125;, <span class="number">0</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;促销产品原始总价：&quot;</span> + beforeSum + <span class="string">&quot;,促销产品打折后总价：&quot;</span> + afterSum + <span class="string">&quot;,少盈利：&quot;</span> + (beforeSum - afterSum));</span><br></pre></td></tr></table></figure>



<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://automation-manage.oss-cn-shanghai.aliyuncs.com/blog/image-20220226012729947.png" alt="高级函数语法"></p>
<h2 id="示例三-1"><a href="#示例三-1" class="headerlink" title="示例三"></a>示例三</h2><ul>
<li>在示例二的基础上进行<code>链式编程方式</code>，更加优雅的实现</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//需求：有一批商品，现在要把大于或等于 10 元的商品促销打 5 折处理</span></span><br><span class="line"><span class="comment">// ①过滤 &gt;=10元的商品 ②把过滤的商品打 5 折 ③列出促销产品打折前后的价格 ④计算此次促销少赚多少钱</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> goods = [<span class="number">10</span>, <span class="number">20</span>, <span class="number">3</span>, <span class="number">30</span>, <span class="number">2</span>, <span class="number">5</span>, <span class="number">90</span>, <span class="number">100</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">//促销产品打折前价格:采用链式编程，过滤-&gt;映射-&gt;汇总</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> afterSum = goods.<span class="title function_">filter</span>(<span class="function"><span class="params">n</span> =&gt;</span> n &gt;= <span class="number">10</span>)</span><br><span class="line">    .<span class="title function_">map</span>(<span class="function"><span class="params">n</span> =&gt;</span> n * <span class="number">0.5</span>)</span><br><span class="line">    .<span class="title function_">reduce</span>(<span class="function">(<span class="params">s, n</span>) =&gt;</span> s += n);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//-----这两个其实都是一样的故意用两种写法 因为箭头函数中只有一条语句可写可不写 return + &#123;&#125; -----</span></span><br><span class="line"><span class="comment">//reduce 如果不传参默认就是 0，如果传参的话写在箭头函数 &#125; 的后面，用逗号分割参数</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//促销产品打折后价格:  采用链式编程，过滤-&gt;映射-&gt;汇总</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> beforeSum = goods.<span class="title function_">filter</span>(<span class="function"><span class="params">n</span> =&gt;</span> &#123; <span class="keyword">return</span> n &gt;= <span class="number">10</span>&#125;)</span><br><span class="line">    .<span class="title function_">map</span>(<span class="function"><span class="params">n</span> =&gt;</span>&#123; <span class="keyword">return</span>  n&#125;)</span><br><span class="line">    .<span class="title function_">reduce</span>(<span class="function">(<span class="params">s, n</span>) =&gt;</span> &#123; <span class="keyword">return</span> s += n&#125;,<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;促销产品原始总价：&quot;</span>+beforeSum+<span class="string">&quot;,促销产品打折后总价：&quot;</span>+afterSum+<span class="string">&quot;,少盈利：&quot;</span>+(beforeSum-afterSum));</span><br></pre></td></tr></table></figure>



<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://automation-manage.oss-cn-shanghai.aliyuncs.com/blog/image-20220226014409543.png" alt="高级函数链式编程"></p>
<h1 id="数据结构集合"><a href="#数据结构集合" class="headerlink" title="数据结构集合"></a>数据结构集合</h1><h2 id="set"><a href="#set" class="headerlink" title="set"></a>set</h2><h3 id="简介-4"><a href="#简介-4" class="headerlink" title="简介"></a>简介</h3><ul>
<li>set 集合和 java 的 set 集合差不多</li>
<li>集合中只能存放值，没有键，相同的值只能存储一个</li>
<li>一个 set 集合中可以同时存放不同的数据类型，比如整型，字符串，数组等</li>
</ul>
<h3 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h3><ul>
<li>常用方法：<code>add</code> <code>delete</code> <code>has</code> <code>size</code> <code>forEach</code> <code>clear</code></li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = <span class="keyword">new</span> <span class="title class_">Set</span>();</span><br><span class="line"><span class="comment">// add 添加数据</span></span><br><span class="line">obj.<span class="title function_">add</span>(<span class="number">1</span>);</span><br><span class="line"><span class="comment">// 添加数据重复数据是无效的</span></span><br><span class="line">obj.<span class="title function_">add</span>(<span class="number">1</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">obj.<span class="title function_">add</span>(<span class="number">5</span>);</span><br><span class="line">obj.<span class="title function_">add</span>([<span class="string">&quot;ada&quot;</span>, <span class="number">25</span>, <span class="string">&quot;测试&quot;</span>]);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 判断集合中是否有 1，返回的是一个布尔值</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj.<span class="title function_">has</span>(<span class="number">1</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">//删除集合中等于 2 的值，删除成功返回 true ，删除失败返回 false，这里面没有 2 就会删除失败返回 false</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj.<span class="title function_">delete</span>(<span class="number">2</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">// 两种遍历方式</span></span><br><span class="line">obj.<span class="title function_">forEach</span>(<span class="function"><span class="params">n</span> =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;forEach遍历结果：&quot;</span> + n))</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> n <span class="keyword">of</span> obj) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(n);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//清空集合</span></span><br><span class="line">obj.<span class="title function_">clear</span>();</span><br><span class="line"><span class="comment">//获取集合大小</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj.<span class="property">size</span>);</span><br></pre></td></tr></table></figure>



<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://automation-manage.oss-cn-shanghai.aliyuncs.com/blog/image-20220226124242701.png" alt="set 示例"></p>
<h2 id="map"><a href="#map" class="headerlink" title="map"></a>map</h2><h3 id="简介-5"><a href="#简介-5" class="headerlink" title="简介"></a>简介</h3><ul>
<li>也和 java 的差不多，通过键值对存储  key-&gt;value</li>
<li>Map 数据结构类似于对象，是键值对的集合，传统的键只能用字符串，Map 的键不限于字符串，各种类型的值（包括对象）都可以当作键。</li>
<li>属性和操作方法<ul>
<li>size 属性，返回 Map 结构的成员总数</li>
<li>set(key,value)方法，设置set方法设置键名key对应的键值为value，然后返回整个 Map 结构。如果key已经有值，则键值会被更新，否则就新生成该</li>
<li>get(key) 方法，读取key对应的键值，如果找不到key，返回undefined</li>
<li>has(key) 方法，返回一个布尔值，表示某个键是否在当前 Map 对象之中。</li>
<li>delete(key) 方法，删除某个键，返回true。如果删除失败，返回false。</li>
<li>clear(key) 方法，清除所有成员，没有返回值。</li>
</ul>
</li>
<li>Map 遍历<ul>
<li>keys()  返回键名的遍历器</li>
<li>values() 返回键值的遍历器</li>
<li>entries()返回所有成员的遍历器</li>
<li>forEach()遍历Map的所有成员</li>
</ul>
</li>
</ul>
<h3 id="示例-1"><a href="#示例-1" class="headerlink" title="示例"></a>示例</h3><ul>
<li>常用方法：<code>set</code> <code>get</code> <code>forEach</code> <code>has</code> <code>size</code></li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> mapObj = <span class="keyword">new</span> <span class="title class_">Map</span>();</span><br><span class="line"></span><br><span class="line">mapObj.<span class="title function_">set</span>(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;ada&quot;</span>);</span><br><span class="line">mapObj.<span class="title function_">set</span>(<span class="string">&quot;age&quot;</span>, <span class="number">25</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(mapObj);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(mapObj.<span class="title function_">get</span>(<span class="string">&quot;name&quot;</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">// 重复的key,value 会覆盖 上面输出的 ada 下面输出的 阿达</span></span><br><span class="line">mapObj.<span class="title function_">set</span>(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;阿达&quot;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(mapObj.<span class="title function_">get</span>(<span class="string">&quot;name&quot;</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">//遍历 和 java 的 lambda 一样一样的</span></span><br><span class="line">mapObj.<span class="title function_">forEach</span>(<span class="function">(<span class="params">k,v</span>)=&gt;</span><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;key:&quot;</span>+k+<span class="string">&quot;,value:&quot;</span>+v))</span><br><span class="line"><span class="comment">//删除 age</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(mapObj.<span class="title function_">delete</span>(<span class="string">&quot;age&quot;</span>));</span><br><span class="line"><span class="comment">//判断是否有 name</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(mapObj.<span class="title function_">has</span>(<span class="string">&quot;age&quot;</span>));</span><br><span class="line"><span class="comment">//获取大小</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(mapObj.<span class="property">size</span>);</span><br></pre></td></tr></table></figure>



<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://automation-manage.oss-cn-shanghai.aliyuncs.com/blog/image-20220226130705034.png" alt="map 示例"></p>
<h1 id="字符串新功能"><a href="#字符串新功能" class="headerlink" title="字符串新功能"></a>字符串新功能</h1><ul>
<li>startsWith    判断以什么字符串开头</li>
<li>endsWith      判断以什么字符串结尾</li>
<li>模板字符串</li>
</ul>
<h2 id="判断开头与结尾"><a href="#判断开头与结尾" class="headerlink" title="判断开头与结尾"></a>判断开头与结尾</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> url = <span class="string">&quot;www.adalucky.com&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> s 域名.前面部分</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> e 域名.后面部分</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns</span> &#123;<span class="type">string</span>&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">fun</span> = (<span class="params">s, e</span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span> (url.<span class="title function_">startsWith</span>(s+<span class="string">&quot;.&quot;</span>) &amp;&amp; url.<span class="title function_">endsWith</span>(<span class="string">&quot;.&quot;</span>+e)) &#123;</span><br><span class="line">        <span class="comment">// return &quot;是一个标准的【&quot;+s+&quot;】开头，【&quot;+e+&quot;】结尾的域名&quot;</span></span><br><span class="line">        <span class="comment">// 上面注释的是普通字符串拼接的变量，下面是用模板字符串 `` $&#123;&#125; 引用变量</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">`是一个标准的【<span class="subst">$&#123;s&#125;</span>】开头，【<span class="subst">$&#123;e&#125;</span>】结尾的域名`</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;不是一个标准的【www】开头，【com】结尾的域名&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">fun</span>(<span class="string">&quot;www&quot;</span>, <span class="string">&quot;com&quot;</span>));</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">fun</span>(<span class="string">&quot;www.&quot;</span>, <span class="string">&quot;.com&quot;</span>));</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">fun</span>(<span class="string">&quot;test&quot;</span>, <span class="string">&quot;vip&quot;</span>));</span><br></pre></td></tr></table></figure>



<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://automation-manage.oss-cn-shanghai.aliyuncs.com/blog/image-20220226141409496.png" alt="判断开头结果"></p>
<h2 id="模板字符串"><a href="#模板字符串" class="headerlink" title="模板字符串"></a>模板字符串</h2><ul>
<li>模板字符串 &#96;&#96;定义字符 ${} 引用变量</li>
<li>支持换行</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> title = <span class="string">&quot;这是标题&quot;</span>;</span><br><span class="line"><span class="keyword">let</span> slogan = <span class="string">&quot;这是标语 slogan&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//里面还可以拼接标签 &lt;title&gt;$&#123;title&#125;&lt;/title&gt; 这使用方法，换行会直接换行</span></span><br><span class="line"><span class="keyword">let</span> str = <span class="string">`模板字符串中直接引用变量不需要用加号隔开</span></span><br><span class="line"><span class="string"><span class="subst">$&#123;title&#125;</span></span></span><br><span class="line"><span class="string"><span class="subst">$&#123;slogan&#125;</span></span></span><br><span class="line"><span class="string">`</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(str);</span><br><span class="line"></span><br><span class="line"><span class="comment">//换行也会自动用加号拼接 最后打印都是一行</span></span><br><span class="line"><span class="keyword">let</span> str2 = <span class="string">&quot;字符串拼接&quot;</span></span><br><span class="line">    + title</span><br><span class="line">    + slogan</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(str2);</span><br></pre></td></tr></table></figure>



<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://automation-manage.oss-cn-shanghai.aliyuncs.com/blog/image-20220226141039948.png" alt="模板字符串示例"></p>
<h1 id="解构赋值"><a href="#解构赋值" class="headerlink" title="解构赋值"></a>解构赋值</h1><h2 id="简介-6"><a href="#简介-6" class="headerlink" title="简介"></a>简介</h2><ul>
<li>解构赋值，序列解包，</li>
<li>注意事项：结构构必须一样，比如数组两边都需要用数组[a,b,c]&#x3D;[1,2,3] 对象{UserName,UserAge,UserSex}&#x3D;{“name”: “ada”, “age”: “25”, “sex”: “男”}</li>
<li>接受的参数个数不能操作数据的长度，可以少，当少于长度时按照从左到右顺序解构</li>
<li>解构赋值不能像定义变量一样分开声明和赋值，例如 let [a,b]; [a,b]&#x3D;[1,2]</li>
</ul>
<h2 id="基础的解构"><a href="#基础的解构" class="headerlink" title="基础的解构"></a>基础的解构</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"><span class="keyword">let</span> a = arr[<span class="number">0</span>];</span><br><span class="line"><span class="keyword">let</span> b = arr[<span class="number">1</span>];</span><br><span class="line"><span class="keyword">let</span> c = arr[<span class="number">2</span>];</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`a=<span class="subst">$&#123;a&#125;</span>,b=<span class="subst">$&#123;b&#125;</span>,c=<span class="subst">$&#123;c&#125;</span>`</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> obj = &#123;<span class="string">&quot;name&quot;</span>: <span class="string">&quot;ada&quot;</span>, <span class="string">&quot;age&quot;</span>: <span class="string">&quot;25&quot;</span>, <span class="string">&quot;sex&quot;</span>: <span class="string">&quot;男&quot;</span>&#125;;</span><br><span class="line"><span class="keyword">let</span> <span class="title class_">UserName</span> = obj.<span class="property">name</span>;</span><br><span class="line"><span class="keyword">let</span> <span class="title class_">UserAge</span> = obj.<span class="property">age</span>;</span><br><span class="line"><span class="keyword">let</span> <span class="title class_">UserSex</span> = obj.<span class="property">sex</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`name:<span class="subst">$&#123;UserName&#125;</span>,age:<span class="subst">$&#123;UserAge&#125;</span>,sex:<span class="subst">$&#123;UserSex&#125;</span>`</span>);</span><br></pre></td></tr></table></figure>





<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>,<span class="number">4</span>];</span><br><span class="line"><span class="comment">//等号右边可以是引用的数组，也可以直接显示声明数组 [a, b, c] = [1, 2, 3,4]</span></span><br><span class="line"><span class="comment">//两边的结构保持一致都是数组，接受的参数个数可以小于数组的长度 不能超出长度</span></span><br><span class="line"><span class="keyword">let</span> [a, b, c] = arr;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`a=<span class="subst">$&#123;a&#125;</span>,b=<span class="subst">$&#123;b&#125;</span>,c=<span class="subst">$&#123;c&#125;</span>`</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//直接显示声明，对象结构的是按照 key 取得所有参数名和对象中的 key 要一致，顺序无所谓</span></span><br><span class="line"><span class="keyword">let</span> &#123;age,sex,name&#125; = &#123;<span class="string">&quot;name&quot;</span>: <span class="string">&quot;ada&quot;</span>, <span class="string">&quot;age&quot;</span>: <span class="string">&quot;25&quot;</span>, <span class="string">&quot;sex&quot;</span>: <span class="string">&quot;男&quot;</span>&#125;;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`name:<span class="subst">$&#123;name&#125;</span>,age:<span class="subst">$&#123;age&#125;</span>,sex:<span class="subst">$&#123;sex&#125;</span>`</span>);</span><br></pre></td></tr></table></figure>



<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://automation-manage.oss-cn-shanghai.aliyuncs.com/blog/image-20220226150138708.png" alt="基础解构"></p>
<h2 id="复杂的解构"><a href="#复杂的解构" class="headerlink" title="复杂的解构"></a>复杂的解构</h2><ul>
<li>这种复杂的一般比较少不常用</li>
<li>①先确定外层结构两边保持一至 ②内层结构中有对象+数组的 那么用 对象名:[] 来二次结构 ③对象的数组中又有对象用，对象名:[{对象名}]</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//较为复杂的组合结构  ①先确定外层结构两边保持一至 ②内层结构中有对象+数组的 那么用 对象名:[] 来二次结构 ③对象的数组中又有对象用，对象名:[&#123;对象名&#125;]</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> [one, two, three, four] = [&#123;<span class="string">&quot;name&quot;</span>: <span class="string">&quot;ada&quot;</span>, <span class="string">&quot;age&quot;</span>: <span class="string">&quot;25&quot;</span>&#125;, [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], <span class="string">&quot;字符串&quot;</span>, <span class="number">10</span>];</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(one, two, three, four);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> [&#123;name, age&#125;, [a1, b1, c1], str1, number1] = [&#123;<span class="string">&quot;name&quot;</span>: <span class="string">&quot;ada1&quot;</span>, <span class="string">&quot;age&quot;</span>: <span class="string">&quot;25&quot;</span>&#125;, [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], <span class="string">&quot;字符串&quot;</span>, <span class="number">1</span>];</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(name, age, a1, b1, c1, str1, number1)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> &#123;obj, arr, str2, number2&#125; = &#123;<span class="string">&quot;obj&quot;</span>: [&#123;<span class="string">&quot;name&quot;</span>: <span class="string">&quot;ada&quot;</span>, <span class="string">&quot;age&quot;</span>: <span class="string">&quot;25&quot;</span>&#125;], <span class="string">&quot;arr&quot;</span>: [<span class="number">15</span>, <span class="number">25</span>, <span class="number">35</span>], <span class="string">&quot;str2&quot;</span>: <span class="string">&quot;字符&quot;</span>, <span class="string">&quot;number2&quot;</span>: <span class="number">2</span>&#125;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="params">obj, arr, str2, number2</span>)</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">let</span> &#123;<span class="attr">obj</span>:[&#123;name,age&#125;], <span class="attr">arr</span>:[a,b,c], str3, number3&#125; = &#123;<span class="string">&quot;obj&quot;</span>: [&#123;<span class="string">&quot;name&quot;</span>: <span class="string">&quot;ada3&quot;</span>, <span class="string">&quot;age&quot;</span>: <span class="string">&quot;27&quot;</span>&#125;], <span class="string">&quot;arr&quot;</span>: [<span class="number">25</span>, <span class="number">35</span>, <span class="number">45</span>], <span class="string">&quot;str3&quot;</span>: <span class="string">&quot;字符&quot;</span>, <span class="string">&quot;number3&quot;</span>: <span class="number">10</span>&#125;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(name, age,a,b,c ,str3, number3)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">let</span> &#123;name, age, <span class="attr">child</span>:&#123;firstChild&#125;&#125;= &#123;<span class="attr">name</span>: <span class="string">&#x27;zxj&#x27;</span>, <span class="attr">age</span>: <span class="number">12</span>, <span class="attr">child</span>: &#123;<span class="attr">firstChild</span>: <span class="string">&#x27;小明&#x27;</span>&#125;&#125;;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(name,age,firstChild)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://automation-manage.oss-cn-shanghai.aliyuncs.com/blog/image-20220226155759354.png" alt="复杂解构示例"></p>
<h1 id="扩展运算符"><a href="#扩展运算符" class="headerlink" title="扩展运算符"></a>扩展运算符</h1><h2 id="简介-7"><a href="#简介-7" class="headerlink" title="简介"></a>简介</h2><ul>
<li>…三点运算符   </li>
<li>展开数组</li>
<li>默认参数   <code>和java 中的可变参数一样</code></li>
</ul>
<h2 id="数组展开放入"><a href="#数组展开放入" class="headerlink" title="数组展开放入"></a>数组展开放入</h2><ul>
<li>先展开数组然后按照所在位置存入数组中</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr1 = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"><span class="keyword">let</span> arr2 = [<span class="number">15</span>, <span class="number">30</span>, <span class="number">50</span>];</span><br><span class="line"><span class="comment">// 三个点展开数组然后放进数组中</span></span><br><span class="line"><span class="keyword">let</span> arr3 = [...arr1, <span class="number">7</span>, <span class="number">8</span>, <span class="number">20</span>, ...arr2];</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr3);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr3[<span class="number">5</span>]);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">argsFun</span> = (<span class="params">arr1,arr2</span>) =&gt; &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(arr1,arr2)</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">argsFun</span>(...arr1)</span><br></pre></td></tr></table></figure>



<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://automation-manage.oss-cn-shanghai.aliyuncs.com/blog/image-20220226164659994.png" alt="数组展开放入"></p>
<h2 id="参数传递"><a href="#参数传递" class="headerlink" title="参数传递"></a>参数传递</h2><ul>
<li>如果方法中有自定义的参数和需要可变参数，可变参数需要放在最后一个形参中</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr1 = [<span class="number">1</span>, <span class="number">5</span>, <span class="number">3</span>,<span class="number">7</span>,<span class="number">9</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">//调用方法是作为参数传递，方法中只需要 2 个参数就会取数组中的前 2 个值</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">argsFun</span> = (<span class="params">arr1, arr2</span>) =&gt; <span class="variable language_">console</span>.<span class="title function_">log</span>(arr1, arr2)</span><br><span class="line"><span class="title function_">argsFun</span>(...arr1)</span><br><span class="line"></span><br><span class="line"><span class="comment">//方法中用 ...args 作为可变参数，传进来的会当成一个数组处理，也可根据 ...args 的下标取值</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">argsFun2</span> = (<span class="params">...args</span>) =&gt; &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(...args)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(...args[<span class="number">2</span>])</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">argsFun2</span>(<span class="number">20</span>, <span class="string">&quot;测试&quot;</span>, <span class="string">&quot;男&quot;</span>, <span class="string">&quot;ada&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//如果方法中有自定义的参数和需要可变参数，可变参数需要放在最后一个形参中</span></span><br><span class="line"><span class="comment">//定义的argsFun3中有 2个参数str,number和一个可变参数 ...args  调用的时候只传了一个 str 和一个展开的数组，展开的数组的第一个就会赋给 number，剩下的给可变参数 ...args</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">argsFun3</span> = (<span class="params">str,number,...args</span>)=&gt;<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`str的值为: <span class="subst">$&#123;str&#125;</span>,number的值为: <span class="subst">$&#123;number&#125;</span>,args的值为: <span class="subst">$&#123;args&#125;</span>`</span>)</span><br><span class="line"><span class="title function_">argsFun3</span>(<span class="string">&quot;字符&quot;</span>,...arr1)</span><br></pre></td></tr></table></figure>



<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://automation-manage.oss-cn-shanghai.aliyuncs.com/blog/image-20220226164814699.png" alt="参数传递"></p>
<h1 id="class"><a href="#class" class="headerlink" title="class"></a>class</h1><h2 id="简介-8"><a href="#简介-8" class="headerlink" title="简介"></a>简介</h2><ul>
<li>ES6之前 JavaScript 叫做基于对象，ES6 新增了 Class（类）的概念，可以说是面向对象的</li>
<li>constructor 是构造方法</li>
<li>this关键字代表实例对象</li>
<li>通过extends关键字实现继承</li>
<li>super关键字，表示父类的构造函数，用来新建父类的this对象</li>
</ul>
<h2 id="对比-1"><a href="#对比-1" class="headerlink" title="对比"></a>对比</h2><ul>
<li>通过截图中左右两段代码可看出来 ES6 的定义类、方法、构造方法层次更加清晰</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ES6 前既是构造函数又是方法</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Person</span>(<span class="params">name, age, sex</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">age</span> = age;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">sex</span> = sex;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">say</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`我是<span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span>`</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">run</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;跑起来吧&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> user = <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;ada&quot;</span>, <span class="number">25</span>, <span class="string">&quot;男&quot;</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(user);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(user.<span class="property">age</span>);</span><br><span class="line">user.<span class="title function_">say</span>();</span><br><span class="line">user.<span class="title function_">run</span>();</span><br></pre></td></tr></table></figure>





<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="comment">//constructor 构造方法关键字</span></span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">name, age, sex</span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">age</span> = age;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">sex</span> = sex;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">say</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`我是<span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span>`</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">run</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;ES6后面跑起来了&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> es6User = <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;阿达&quot;</span>, <span class="number">20</span>, <span class="string">&quot;男性&quot;</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(es6User);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(es6User.<span class="property">sex</span>);</span><br><span class="line">es6User.<span class="title function_">say</span>();</span><br><span class="line">es6User.<span class="title function_">run</span>();</span><br></pre></td></tr></table></figure>



<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://automation-manage.oss-cn-shanghai.aliyuncs.com/blog/image-20220226173822352.png" alt="对比"></p>
<h2 id="继承"><a href="#继承" class="headerlink" title="继承"></a>继承</h2><ul>
<li>继承通过关键字 extends 实现</li>
<li>子类如果重写了父类的方法调用的是子类自己的方法</li>
<li>子类的方法中如果需要调用父类的其它方法可以使用 super.run() super.say() 这种方式</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">name, age, sex</span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">age</span> = age;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">sex</span> = sex;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">say</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`我是父类的<span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span>`</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">run</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;ES6后面跑起来了&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">students</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Person</span>&#123;</span><br><span class="line">    <span class="comment">//子类的构造方法，因为我们子类只新增了一个school参数，那么可以用之前的可变参数 ...args 优雅</span></span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">school,...args</span>) &#123;</span><br><span class="line">        <span class="comment">//在子类的构造方法中调用父类的构造方法后再把新增的 school也给初始化</span></span><br><span class="line">        <span class="variable language_">super</span>(...args);</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">school</span> = school;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//子类重写父类的对象方法</span></span><br><span class="line">    <span class="title function_">say</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`我是子类的<span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span>`</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> es6Student = <span class="keyword">new</span> <span class="title function_">students</span>(<span class="string">&quot;十八线学校&quot;</span>,<span class="string">&quot;阿达&quot;</span>, <span class="number">20</span>, <span class="string">&quot;男性&quot;</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(es6Student);</span><br><span class="line">es6Student.<span class="title function_">say</span>();</span><br></pre></td></tr></table></figure>



<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://automation-manage.oss-cn-shanghai.aliyuncs.com/blog/image-20220226175904156.png" alt="继承"></p>
<h1 id="JSON"><a href="#JSON" class="headerlink" title="JSON"></a>JSON</h1><h2 id="简介-9"><a href="#简介-9" class="headerlink" title="简介"></a>简介</h2><ul>
<li>JSON.stringify()      串行化</li>
<li>JSON.parse()          反串行化</li>
<li>简写  <ul>
<li>(属性和值)名字一样可以简写</li>
<li>方法一样可以简写（:function省）</li>
</ul>
</li>
</ul>
<h2 id="简写"><a href="#简写" class="headerlink" title="简写"></a>简写</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> user1 = &#123;<span class="attr">name</span>: <span class="string">&quot;ada&quot;</span>, <span class="attr">age</span>: <span class="string">&quot;20&quot;</span>, <span class="attr">sex</span>: <span class="string">&quot;男&quot;</span>&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(user1);</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> name = <span class="string">&quot;阿达&quot;</span>;</span><br><span class="line"><span class="keyword">let</span> age1 = <span class="number">20</span>;</span><br><span class="line"><span class="comment">//简写：name:name --&gt; 简写 name 既是键又是值的引用, age不行，因为对象的 key 叫 age，变量名叫 age1</span></span><br><span class="line"><span class="keyword">const</span> user2 = &#123;name, <span class="attr">age</span>: age1, <span class="attr">sex</span>: <span class="string">&quot;男&quot;</span>&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(user2);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> user3 = &#123;</span><br><span class="line">    <span class="comment">//    对象里面再套一个方法 say:function ()---&gt;简写为 say()</span></span><br><span class="line">    name, age1, <span class="attr">sex</span>: <span class="string">&quot;男&quot;</span>, <span class="title function_">say</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">user3.<span class="title function_">say</span>();</span><br></pre></td></tr></table></figure>



<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://automation-manage.oss-cn-shanghai.aliyuncs.com/blog/image-20220226185924747.png" alt="json 简写"></p>
<h2 id="串行化、-反串行化"><a href="#串行化、-反串行化" class="headerlink" title="串行化、 反串行化"></a>串行化、 反串行化</h2><ul>
<li>串行化：JSON 对象转成 字符串          </li>
<li>反串行化：JSON 格式的字符串转成 JSON</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> user3 = &#123;</span><br><span class="line">    <span class="comment">//    对象里面再套一个方法 say:function ()---&gt;简写为 say()</span></span><br><span class="line">    <span class="attr">name</span>:<span class="string">&quot;ada&quot;</span>, <span class="attr">age</span>:<span class="number">25</span>, <span class="attr">sex</span>: <span class="string">&quot;男&quot;</span>, <span class="title function_">say</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> str = <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(user3);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(str);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(str.<span class="property">name</span>);  <span class="comment">//会输出 undefined，此时的 str 已经被串行成了字符串，没有 name 的属性</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> json = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(str);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(json.<span class="property">name</span>);</span><br><span class="line">json.<span class="title function_">say</span>();     <span class="comment">//这一句就会报错，因为上面串行化的时候已经丢失了 say 的方法</span></span><br></pre></td></tr></table></figure>



<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://automation-manage.oss-cn-shanghai.aliyuncs.com/blog/image-20220226191056019.png" alt="串行化和反串行化"></p>
<h1 id="Module模块化"><a href="#Module模块化" class="headerlink" title="Module模块化"></a>Module模块化</h1><h2 id="简介-10"><a href="#简介-10" class="headerlink" title="简介"></a>简介</h2><ul>
<li>模块化优点：减少命名冲突	避免引入时的层层依赖	可以提升执行效率</li>
<li>export命令：用于规定模块的对外接口，一个模块就是一个独立的文件。该文件内部的所有变量，外部无法获取。如果你希望外部能够读取模块内部的某个变量，就必须使用export关键字输出该变量。</li>
<li>import命令：用于输入其他模块提供的功能，import命令接受一对大括号，里面指定要从其他模块导入的变量名。大括号里面的变量名，必须与被导入模块（profile.js）对外接口的名称相同。</li>
</ul>
<h2 id="冲突示例"><a href="#冲突示例" class="headerlink" title="冲突示例"></a>冲突示例</h2><ul>
<li>当我们在 html 中引入的 js 时，多个 js 存在重复的变量名、方法名、函数名，就会发生冲突，已经命名的不能重复命名</li>
<li>解决方法：给每个 js 文件类型都设置成 module，这样都是独立的了</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://automation-manage.oss-cn-shanghai.aliyuncs.com/blog/image-20220226201314324.png" alt="命名冲突报错"></p>
<h2 id="导入导出"><a href="#导入导出" class="headerlink" title="导入导出"></a>导入导出</h2><ul>
<li><code>坑</code>：如果是用 node 运行，导入导出使用的关键分别为 <code>require</code> <code>module.exports</code></li>
<li><code>坑</code>：如果是用 浏览器 运行，导入导出使用的关键分别为 <code>import</code> <code>export</code></li>
<li><code>注意事项</code>：如果是用 node 运行,文件后的 .js 可以不写，如果是浏览器运行导出的文件<code>必须写后缀 .js</code> （这里不包含打包工具处理哈，可能有些打包工具会自动处理上述问题）</li>
<li>导出的时候可以整体用一个 export {导出1,导出 2,…} 也可以在单个上用 export 导出</li>
<li>导入导出时需要使用到<code>解构赋值</code> <code>JSON 简写</code> 的方式比较简便</li>
</ul>
<h3 id="示例一-3"><a href="#示例一-3" class="headerlink" title="示例一"></a>示例一</h3><ul>
<li>导入时有命名冲突的可在导入方用 as 起别名</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//导出 简写 x:x y:y   json中支持的简写方式 既是Key又是value</span></span><br><span class="line"><span class="comment">//如果是用 node 运行，导出关键字为 module.exports，如果是浏览器运行导出的关键字为 export</span></span><br><span class="line"><span class="comment">// module.exports =&#123;x, y,mun&#125;;</span></span><br><span class="line"><span class="keyword">export</span> &#123;x, y, mun&#125;;</span><br><span class="line"><span class="keyword">let</span> x = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">let</span> y = <span class="number">5</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="title function_">mun</span> = (<span class="params">i, j</span>) =&gt; <span class="string">&quot;这是one.js返回的：&quot;</span> + i * j;</span><br><span class="line"><span class="comment">// console.log(mun(x, y));</span></span><br></pre></td></tr></table></figure>





<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> &#123;add, mun,<span class="title class_">Person</span>&#125;</span><br><span class="line"><span class="keyword">let</span> name = <span class="string">&quot;ada&quot;</span>;</span><br><span class="line"><span class="keyword">let</span> age = <span class="number">25</span>;</span><br><span class="line"><span class="keyword">let</span> sex = <span class="string">&quot;男&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="title function_">add</span> = (<span class="params">a, b</span>) =&gt; a + b;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="title function_">mun</span> = (<span class="params">i, j</span>) =&gt; <span class="string">&quot;这是two.js返回的：&quot;</span> + i * j;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="title function_">say</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;two.js中 Person 类的 say 方法&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//如果是用 node 运行，导入关键字为 require,文件后的 .js 可以不写，如果是浏览器运行导出的关键字为 import，文件后的 .js 必须写</span></span><br><span class="line"><span class="comment">// let &#123;x, y, mun&#125; = require(&#x27;./two&#x27;);</span></span><br><span class="line"><span class="keyword">import</span> &#123;x,y,mun&#125; <span class="keyword">from</span> <span class="string">&quot;./one.js&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;add,mun <span class="keyword">as</span> mun2,<span class="title class_">Person</span>&#125; <span class="keyword">from</span> <span class="string">&quot;./two.js&quot;</span>     <span class="comment">//如果有命名冲突的可以再导入方 as 起个别名</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">mun</span>(x, y));</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">mun2</span>(x, y));</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> per =<span class="keyword">new</span> <span class="title class_">Person</span>();</span><br><span class="line">per.<span class="title function_">say</span>();</span><br></pre></td></tr></table></figure>





<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;index.js&quot;</span> <span class="attr">type</span>=<span class="string">&quot;module&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>



<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://automation-manage.oss-cn-shanghai.aliyuncs.com/blog/image-20220226211722140.png" alt="导入导出示例一"></p>
<h3 id="示例二-3"><a href="#示例二-3" class="headerlink" title="示例二"></a>示例二</h3><ul>
<li>导出时一个 js 文件最多可以定义一个匿名的 default 导出，由导入方定义名称</li>
<li>导出的时候也可以通过 as 起别名</li>
<li>导入的时候可以用 <code>* as name</code> 把暴露的接口都整合在一个对象中，使用时直接用这个对象来操作</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> &#123;x, y &#125;;</span><br><span class="line"><span class="keyword">let</span> x = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">let</span> y = <span class="number">5</span>;</span><br><span class="line"><span class="comment">//匿名的，导出方不需要定义名称，导入方自定义，一个 js 文件中只能有一个 default，需要单独写 export</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> (i, j) =&gt; <span class="string">&quot;这是one.js，default返回的：&quot;</span> + i * j;</span><br></pre></td></tr></table></figure>





<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> &#123;name <span class="keyword">as</span> myName, age, sex, <span class="title class_">Person</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> name = <span class="string">&quot;ada&quot;</span>;</span><br><span class="line"><span class="keyword">let</span> age = <span class="number">25</span>;</span><br><span class="line"><span class="keyword">let</span> sex = <span class="string">&quot;男&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="title function_">say</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;user.js中 Person 类的 say 方法&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;x,y&#125; <span class="keyword">from</span> <span class="string">&quot;./dome.js&quot;</span>;</span><br><span class="line"><span class="comment">//导入方自定义 dome.js 中的匿名函数，需要单独写一个 import 不能放在 &#123;x,y&#125; 中</span></span><br><span class="line"><span class="keyword">import</span> test <span class="keyword">from</span> <span class="string">&quot;./dome.js&quot;</span>;    </span><br><span class="line"><span class="comment">// 导入user.js 中暴露出来的接口，并起个别名为 user</span></span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> user <span class="keyword">from</span> <span class="string">&quot;./user.js&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">test</span>(x, y));</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(user.<span class="property">myName</span>);</span><br><span class="line"><span class="keyword">let</span> p = <span class="keyword">new</span> user.<span class="title class_">Person</span>();</span><br><span class="line">p.<span class="title function_">say</span>();</span><br></pre></td></tr></table></figure>





<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;index.js&quot;</span> <span class="attr">type</span>=<span class="string">&quot;module&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>



<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://automation-manage.oss-cn-shanghai.aliyuncs.com/blog/image-20220226215408000.png" alt="导入导出示例二"></p>
</article><div class="post-copyright"><div class="copyright-cc-box"><i class="anzhiyufont anzhiyu-icon-copyright"></i></div><div class="post-copyright__author_box"><a class="post-copyright__author_img" href="/" title="头像"><img class="post-copyright__author_img_back" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://image.3001.net/images/20210606/16229390604952.png" title="头像" alt="头像"><img class="post-copyright__author_img_front" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://image.3001.net/images/20210606/16229390604952.png" title="头像" alt="头像"></a><div class="post-copyright__author_name">Ada</div><div class="post-copyright__author_desc"></div></div><div class="post-copyright__post__info"><a class="post-copyright__original" title="该文章为原创文章，注意版权协议" href="https://adalucky.github.io/worker/Developer/ES6/">原创</a><a class="post-copyright-title"><span onclick="rm.copyPageUrl('https://adalucky.github.io/worker/Developer/ES6/')">ECMAScript 6</span></a></div><div class="post-tools" id="post-tools"><div class="post-tools-left"><div class="rewardLeftButton"><div class="post-reward" onclick="anzhiyu.addRewardMask()"><div class="reward-button button--animated" title="赞赏作者"><i class="anzhiyufont anzhiyu-icon-hand-heart-fill"></i>打赏作者</div><div class="reward-main"><div class="reward-all"><span class="reward-title">感谢你赐予我前进的力量</span><ul class="reward-group"><li class="reward-item"><a href="https://automation-manage.oss-cn-shanghai.aliyuncs.com/blog/wechat.png" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://automation-manage.oss-cn-shanghai.aliyuncs.com/blog/wechat.png" alt="wechat"/></a><div class="post-qr-code-desc">wechat</div></li><li class="reward-item"><a href="https://automation-manage.oss-cn-shanghai.aliyuncs.com/blog/alipay.png" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://automation-manage.oss-cn-shanghai.aliyuncs.com/blog/alipay.png" alt="alipay"/></a><div class="post-qr-code-desc">alipay</div></li></ul><a class="reward-main-btn" href="/about/#about-reward" target="_blank"><div class="reward-text">赞赏者名单</div><div class="reward-dec">因为你们的支持让我意识到写文章的价值🙏</div></a></div></div></div><div id="quit-box" onclick="anzhiyu.removeRewardMask()" style="display: none"></div></div><div class="shareRight"><div class="share-link mobile"><div class="share-qrcode"><div class="share-button" title="使用手机访问这篇文章"><i class="anzhiyufont anzhiyu-icon-qrcode"></i></div><div class="share-main"><div class="share-main-all"><div id="qrcode" title="https://adalucky.github.io/worker/Developer/ES6/"></div><div class="reward-dec">使用手机访问这篇文章</div></div></div></div></div><div class="share-link weibo"><a class="share-button" target="_blank" href="https://service.weibo.com/share/share.php?title=ECMAScript 6&amp;url=https://adalucky.github.io/worker/Developer/ES6/&amp;pic=https://automation-manage.oss-cn-shanghai.aliyuncs.com/blog/auto/ES6.jpg" rel="external nofollow noreferrer noopener"><i class="anzhiyufont anzhiyu-icon-weibo"></i></a></div><div class="share-link copyurl"><div class="share-button" id="post-share-url" title="复制链接" onclick="rm.copyPageUrl()"><i class="anzhiyufont anzhiyu-icon-link"></i></div></div></div></div></div><div class="post-copyright__notice"><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://adalucky.github.io" target="_blank">Ada</a>！</span></div></div><div class="post-tools-right"><div class="tag_share"><div class="post-meta__box"><div class="post-meta__box__tag-list"><a class="post-meta__box__tags" href="/tags/%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>前端基础<span class="tagsPageCount">6</span></a><a class="post-meta__box__tags" href="/tags/ES6/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>ES6<span class="tagsPageCount">1</span></a></div></div></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/worker/Developer/webpack5/"><img class="prev-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://automation-manage.oss-cn-shanghai.aliyuncs.com/blog/auto/webpack.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">webpack5</div></div></a></div><div class="next-post pull-right"><a href="/worker/Developer/Axios/"><img class="next-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://automation-manage.oss-cn-shanghai.aliyuncs.com/blog/auto/axios.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Axios</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="anzhiyufont anzhiyu-icon-thumbs-up fa-fw" style="font-size: 1.5rem; margin-right: 4px"></i><span>猜你喜欢</span></div><div class="relatedPosts-list"><div><a href="/worker/Developer/TypeScript2/" title="TypeScript 下"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://automation-manage.oss-cn-shanghai.aliyuncs.com/blog/auto/TypeScript.png" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2022-06-03</div><div class="title">TypeScript 下</div></div></a></div><div><a href="/worker/Developer/TypeScript1/" title="TypeScript 上"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://automation-manage.oss-cn-shanghai.aliyuncs.com/blog/auto/TypeScript.png" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2022-05-21</div><div class="title">TypeScript 上</div></div></a></div><div><a href="/worker/Developer/Axios/" title="Axios"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://automation-manage.oss-cn-shanghai.aliyuncs.com/blog/auto/axios.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2022-02-26</div><div class="title">Axios</div></div></a></div><div><a href="/worker/Developer/webpack5/" title="webpack5"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://automation-manage.oss-cn-shanghai.aliyuncs.com/blog/auto/webpack.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2022-02-22</div><div class="title">webpack5</div></div></a></div><div><a href="/worker/Developer/NPM/" title="NPM"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://automation-manage.oss-cn-shanghai.aliyuncs.com/blog/auto/npm.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2022-02-04</div><div class="title">NPM</div></div></a></div></div></div><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="anzhiyufont anzhiyu-icon-comments"></i><span> 评论</span></div><div class="comment-randomInfo"><a onclick="anzhiyu.addRandomCommentInfo()" href="javascript:void(0)">匿名评论</a><a href="/privacy" style="margin-left: 4px">隐私政策</a></div></div><div class="comment-wrap"><div><div class="vcomment" id="vcomment"></div></div></div></div><div class="comment-barrage"></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-content"><div class="author-info__sayhi" id="author-info__sayhi" onclick="anzhiyu.changeSayHelloText()"></div><div class="author-info-top" title="点击展开"><div class="card-info-avatar"><div class="avatar-img"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://image.3001.net/images/20210606/16229390604952.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div></div></div><div class="author-info__description">我的个人博客</div></div></div><div class="card-widget anzhiyu-right-widget" id="card-wechat" onclick="null"><div id="flip-wrapper"><div id="flip-content"><div class="face" style="background: url(https://bu.dusays.com/2023/01/13/63c02edf44033.png) center center / 100% no-repeat"></div><div class="back face" style="background: url(https://automation-manage.oss-cn-shanghai.aliyuncs.com/blog/jqqdgzh.png) center center / 100% no-repeat"></div></div></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bars"></i><span>文章目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AE%80%E4%BB%8B"><span class="toc-number">1.</span> <span class="toc-text">简介</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99"><span class="toc-number">1.0.1.</span> <span class="toc-text">参考资料</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#ECMAScript-6%E8%AF%AD%E6%B3%95%E5%92%8C%E5%BA%94%E7%94%A8"><span class="toc-number">2.</span> <span class="toc-text">ECMAScript 6语法和应用</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#ECMAScript%E5%92%8C-JavaScrip%E7%9A%84%E5%85%B3%E7%B3%BB"><span class="toc-number">3.</span> <span class="toc-text">ECMAScript和 JavaScrip的关系</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%89%88%E6%9C%AC%E8%AE%B0%E5%BD%95"><span class="toc-number">4.</span> <span class="toc-text">版本记录</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#let-const"><span class="toc-number">5.</span> <span class="toc-text">let&amp;const</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AE%80%E4%BB%8B-1"><span class="toc-number">5.1.</span> <span class="toc-text">简介</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BC%BA%E9%99%B7"><span class="toc-number">5.2.</span> <span class="toc-text">缺陷</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#var%E5%8F%AF%E4%BB%A5%E9%87%8D%E5%A4%8D%E5%A3%B0%E6%98%8E"><span class="toc-number">5.2.1.</span> <span class="toc-text">var可以重复声明</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#var%E6%97%A0%E6%B3%95%E9%99%90%E5%88%B6%E4%BF%AE%E6%94%B9"><span class="toc-number">5.2.2.</span> <span class="toc-text">var无法限制修改</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%98%E9%87%8F%E6%8F%90%E5%8D%87"><span class="toc-number">5.2.3.</span> <span class="toc-text">变量提升</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95%EF%BC%88%E9%97%AD%E5%8C%85-let%EF%BC%89"><span class="toc-number">5.3.</span> <span class="toc-text">解决方法（闭包&amp;let）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%A4%BA%E4%BE%8B%E4%B8%80"><span class="toc-number">5.3.1.</span> <span class="toc-text">示例一</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%A4%BA%E4%BE%8B%E4%BA%8C"><span class="toc-number">5.3.2.</span> <span class="toc-text">示例二</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%A4%BA%E4%BE%8B%E4%B8%89%EF%BC%88let%EF%BC%89"><span class="toc-number">5.3.3.</span> <span class="toc-text">示例三（let）</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#const"><span class="toc-number">5.4.</span> <span class="toc-text">const</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%80%BB%E7%BB%93"><span class="toc-number">5.5.</span> <span class="toc-text">总结</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#let"><span class="toc-number">5.5.1.</span> <span class="toc-text">let</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#const-1"><span class="toc-number">5.5.2.</span> <span class="toc-text">const</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AF%B9%E6%AF%94"><span class="toc-number">5.5.3.</span> <span class="toc-text">对比</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AE%AD%E5%A4%B4%E5%87%BD%E6%95%B0"><span class="toc-number">6.</span> <span class="toc-text">箭头函数</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AE%80%E4%BB%8B-2"><span class="toc-number">6.1.</span> <span class="toc-text">简介</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%A4%BA%E4%BE%8B%E4%B8%80%EF%BC%88%E7%AE%AD%E5%A4%B4%E5%87%BD%E6%95%B0%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8%EF%BC%89"><span class="toc-number">6.2.</span> <span class="toc-text">示例一（箭头函数基本使用）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%A4%BA%E4%BE%8B%E4%BA%8C%EF%BC%88%E6%95%B0%E7%BB%84%E6%8E%92%E5%BA%8F%EF%BC%89"><span class="toc-number">6.3.</span> <span class="toc-text">示例二（数组排序）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%A4%BA%E4%BE%8B%E4%B8%89%EF%BC%88%E7%AE%AD%E5%A4%B4%E5%87%BD%E6%95%B0%E8%BF%94%E5%9B%9E%E5%AF%B9%E8%B1%A1%EF%BC%89"><span class="toc-number">6.4.</span> <span class="toc-text">示例三（箭头函数返回对象）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%A4%BA%E4%BE%8B%E5%9B%9B%EF%BC%88%E6%9E%84%E9%80%A0%E6%96%B9%E6%B3%95%EF%BC%89"><span class="toc-number">6.5.</span> <span class="toc-text">示例四（构造方法）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%B3%E4%BA%8E%E7%AE%AD%E5%A4%B4%E5%87%BD%E6%95%B0%E4%B8%AD%E7%9A%84this%E7%9A%84%E6%8C%87%E5%90%91"><span class="toc-number">6.6.</span> <span class="toc-text">关于箭头函数中的this的指向</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AE%80%E4%BB%8B-3"><span class="toc-number">6.6.1.</span> <span class="toc-text">简介</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%A4%BA%E4%BE%8B%E4%B8%80-1"><span class="toc-number">6.6.2.</span> <span class="toc-text">示例一</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%A4%BA%E4%BE%8B%E4%BA%8C-1"><span class="toc-number">6.6.3.</span> <span class="toc-text">示例二</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%A4%BA%E4%BE%8B%E4%B8%89"><span class="toc-number">6.6.4.</span> <span class="toc-text">示例三</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%95%B0%E7%BB%84%E6%96%B0%E6%96%B9%E6%B3%95"><span class="toc-number">7.</span> <span class="toc-text">数组新方法</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8%E6%96%B0%E5%A2%9E%E6%96%B9%E6%B3%95"><span class="toc-number">7.1.</span> <span class="toc-text">常用新增方法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%A4%BA%E4%BE%8B%E4%B8%80-2"><span class="toc-number">7.2.</span> <span class="toc-text">示例一</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%A4%BA%E4%BE%8B%E4%BA%8C-2"><span class="toc-number">7.3.</span> <span class="toc-text">示例二</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%A4%BA%E4%BE%8B%E4%B8%89-1"><span class="toc-number">7.4.</span> <span class="toc-text">示例三</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E9%9B%86%E5%90%88"><span class="toc-number">8.</span> <span class="toc-text">数据结构集合</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#set"><span class="toc-number">8.1.</span> <span class="toc-text">set</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AE%80%E4%BB%8B-4"><span class="toc-number">8.1.1.</span> <span class="toc-text">简介</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%A4%BA%E4%BE%8B"><span class="toc-number">8.1.2.</span> <span class="toc-text">示例</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#map"><span class="toc-number">8.2.</span> <span class="toc-text">map</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AE%80%E4%BB%8B-5"><span class="toc-number">8.2.1.</span> <span class="toc-text">简介</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%A4%BA%E4%BE%8B-1"><span class="toc-number">8.2.2.</span> <span class="toc-text">示例</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%96%B0%E5%8A%9F%E8%83%BD"><span class="toc-number">9.</span> <span class="toc-text">字符串新功能</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%A4%E6%96%AD%E5%BC%80%E5%A4%B4%E4%B8%8E%E7%BB%93%E5%B0%BE"><span class="toc-number">9.1.</span> <span class="toc-text">判断开头与结尾</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A8%A1%E6%9D%BF%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="toc-number">9.2.</span> <span class="toc-text">模板字符串</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%A7%A3%E6%9E%84%E8%B5%8B%E5%80%BC"><span class="toc-number">10.</span> <span class="toc-text">解构赋值</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AE%80%E4%BB%8B-6"><span class="toc-number">10.1.</span> <span class="toc-text">简介</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9F%BA%E7%A1%80%E7%9A%84%E8%A7%A3%E6%9E%84"><span class="toc-number">10.2.</span> <span class="toc-text">基础的解构</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%8D%E6%9D%82%E7%9A%84%E8%A7%A3%E6%9E%84"><span class="toc-number">10.3.</span> <span class="toc-text">复杂的解构</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%89%A9%E5%B1%95%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="toc-number">11.</span> <span class="toc-text">扩展运算符</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AE%80%E4%BB%8B-7"><span class="toc-number">11.1.</span> <span class="toc-text">简介</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E7%BB%84%E5%B1%95%E5%BC%80%E6%94%BE%E5%85%A5"><span class="toc-number">11.2.</span> <span class="toc-text">数组展开放入</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%82%E6%95%B0%E4%BC%A0%E9%80%92"><span class="toc-number">11.3.</span> <span class="toc-text">参数传递</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#class"><span class="toc-number">12.</span> <span class="toc-text">class</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AE%80%E4%BB%8B-8"><span class="toc-number">12.1.</span> <span class="toc-text">简介</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AF%B9%E6%AF%94-1"><span class="toc-number">12.2.</span> <span class="toc-text">对比</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%A7%E6%89%BF"><span class="toc-number">12.3.</span> <span class="toc-text">继承</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#JSON"><span class="toc-number">13.</span> <span class="toc-text">JSON</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AE%80%E4%BB%8B-9"><span class="toc-number">13.1.</span> <span class="toc-text">简介</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AE%80%E5%86%99"><span class="toc-number">13.2.</span> <span class="toc-text">简写</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%B2%E8%A1%8C%E5%8C%96%E3%80%81-%E5%8F%8D%E4%B8%B2%E8%A1%8C%E5%8C%96"><span class="toc-number">13.3.</span> <span class="toc-text">串行化、 反串行化</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Module%E6%A8%A1%E5%9D%97%E5%8C%96"><span class="toc-number">14.</span> <span class="toc-text">Module模块化</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AE%80%E4%BB%8B-10"><span class="toc-number">14.1.</span> <span class="toc-text">简介</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%86%B2%E7%AA%81%E7%A4%BA%E4%BE%8B"><span class="toc-number">14.2.</span> <span class="toc-text">冲突示例</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AF%BC%E5%85%A5%E5%AF%BC%E5%87%BA"><span class="toc-number">14.3.</span> <span class="toc-text">导入导出</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%A4%BA%E4%BE%8B%E4%B8%80-3"><span class="toc-number">14.3.1.</span> <span class="toc-text">示例一</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%A4%BA%E4%BE%8B%E4%BA%8C-3"><span class="toc-number">14.3.2.</span> <span class="toc-text">示例二</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/worker/Toolbox/Hexo/" title="Hexo"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://automation-manage.oss-cn-shanghai.aliyuncs.com/blog/other/hexo.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Hexo"/></a><div class="content"><a class="title" href="/worker/Toolbox/Hexo/" title="Hexo">Hexo</a><time datetime="2023-08-14T16:00:00.000Z" title="发表于 2023-08-15 00:00:00">2023-08-15</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/worker/Backender/MongoDB/" title="MongoDB"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://automation-manage.oss-cn-shanghai.aliyuncs.com/blog/mongodb.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="MongoDB"/></a><div class="content"><a class="title" href="/worker/Backender/MongoDB/" title="MongoDB">MongoDB</a><time datetime="2023-07-04T16:00:00.000Z" title="发表于 2023-07-05 00:00:00">2023-07-05</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/worker/Ops/Docker%20Compose/" title="Docker Compose"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://automation-manage.oss-cn-shanghai.aliyuncs.com/blog/docker-compose.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Docker Compose"/></a><div class="content"><a class="title" href="/worker/Ops/Docker%20Compose/" title="Docker Compose">Docker Compose</a><time datetime="2023-06-26T16:00:00.000Z" title="发表于 2023-06-27 00:00:00">2023-06-27</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/worker/Ops/Linux%E5%91%BD%E4%BB%A4/" title="Linux 命令"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://automation-manage.oss-cn-shanghai.aliyuncs.com/blog/linux.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Linux 命令"/></a><div class="content"><a class="title" href="/worker/Ops/Linux%E5%91%BD%E4%BB%A4/" title="Linux 命令">Linux 命令</a><time datetime="2023-06-26T16:00:00.000Z" title="发表于 2023-06-27 00:00:00">2023-06-27</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/worker/Ops/asdf%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%AE%A1%E7%90%86/" title="asdf"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://automation-manage.oss-cn-shanghai.aliyuncs.com/blog/asdf.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="asdf"/></a><div class="content"><a class="title" href="/worker/Ops/asdf%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%AE%A1%E7%90%86/" title="asdf">asdf</a><time datetime="2023-06-13T16:00:00.000Z" title="发表于 2023-06-14 00:00:00">2023-06-14</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"></div><div id="footer-bar"><div class="footer-bar-links"><div class="footer-bar-left"><div id="footer-bar-tips"><div class="copyright">&copy;2020 - 2023 By <a class="footer-bar-link" href="/" title="Ada" target="_blank">Ada</a></div></div><div id="footer-type-tips"></div></div><div class="footer-bar-right"><a class="footer-bar-link" target="_blank" rel="noopener" href="https://github.com/anzhiyu-c/hexo-theme-anzhiyu" title="主题">主题</a></div></div></div></footer></div></div></div><div id="sidebar"><div id="sidebar-menus"><div class="avatar-img is-center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://image.3001.net/images/20210606/16229390604952.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/" title="archive"><div class="headline">文章</div><div class="length-num">56</div></a><a href="/tags/" title="tag"><div class="headline">标签</div><div class="length-num">75</div></a><a href="/categories/" title="category"><div class="headline">分类</div><div class="length-num">8</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/archives/"><span> 总览</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/categories/"><span> 分类</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/tags/"><span> 标签</span></a></div></div></div></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="anzhiyufont anzhiyu-icon-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="anzhiyufont anzhiyu-icon-gear"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="anzhiyufont anzhiyu-icon-list-ul"></i></button><button id="chat_btn" type="button" title="聊天"><i class="anzhiyufont anzhiyu-icon-comment-sms"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="anzhiyufont anzhiyu-icon-comments"></i></a><a id="switch_commentBarrage" href="javascript:anzhiyu.switchCommentBarrage();" title="开关弹幕"><i class="anzhiyufont anzhiyu-icon-danmu"></i></a><button id="go-up" type="button" title="回到顶部"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div><div id="algolia-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><button class="search-close-button"><i class="anzhiyufont anzhiyu-icon-xmark"></i></button></nav><div class="search-wrap"><div id="algolia-search-input"></div><hr/><div id="algolia-search-results"><div id="algolia-hits"></div><div id="algolia-pagination"></div><div id="algolia-info"><div class="algolia-stats"></div><div class="algolia-poweredBy"></div></div></div></div></div><div id="search-mask"></div></div><div id="rightMenu"><div class="rightMenu-group rightMenu-small"><div class="rightMenu-item" id="menu-backward"><i class="anzhiyufont anzhiyu-icon-arrow-left"></i></div><div class="rightMenu-item" id="menu-forward"><i class="anzhiyufont anzhiyu-icon-arrow-right"></i></div><div class="rightMenu-item" id="menu-refresh"><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right" style="font-size: 1rem;"></i></div><div class="rightMenu-item" id="menu-top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></div></div><div class="rightMenu-group rightMenu-line rightMenuPlugin"><div class="rightMenu-item" id="menu-copytext"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制选中文本</span></div><div class="rightMenu-item" id="menu-pastetext"><i class="anzhiyufont anzhiyu-icon-paste"></i><span>粘贴文本</span></div><a class="rightMenu-item" id="menu-commenttext"><i class="anzhiyufont anzhiyu-icon-comment-medical"></i><span>引用到评论</span></a><div class="rightMenu-item" id="menu-newwindow"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开</span></div><div class="rightMenu-item" id="menu-copylink"><i class="anzhiyufont anzhiyu-icon-link"></i><span>复制链接地址</span></div><div class="rightMenu-item" id="menu-copyimg"><i class="anzhiyufont anzhiyu-icon-images"></i><span>复制此图片</span></div><div class="rightMenu-item" id="menu-downloadimg"><i class="anzhiyufont anzhiyu-icon-download"></i><span>下载此图片</span></div><div class="rightMenu-item" id="menu-newwindowimg"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开图片</span></div><div class="rightMenu-item" id="menu-search"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>站内搜索</span></div><div class="rightMenu-item" id="menu-searchBaidu"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>百度搜索</span></div><div class="rightMenu-item" id="menu-music-toggle"><i class="anzhiyufont anzhiyu-icon-play"></i><span>播放音乐</span></div><div class="rightMenu-item" id="menu-music-back"><i class="anzhiyufont anzhiyu-icon-backward"></i><span>切换到上一首</span></div><div class="rightMenu-item" id="menu-music-forward"><i class="anzhiyufont anzhiyu-icon-forward"></i><span>切换到下一首</span></div><div class="rightMenu-item" id="menu-music-playlist" onclick="window.open(&quot;https://y.qq.com/n/ryqq/playlist/8802438608&quot;, &quot;_blank&quot;);" style="display: none;"><i class="anzhiyufont anzhiyu-icon-radio"></i><span>查看所有歌曲</span></div><div class="rightMenu-item" id="menu-music-copyMusicName"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制歌名</span></div></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item menu-link" id="menu-randomPost"><i class="anzhiyufont anzhiyu-icon-shuffle"></i><span>随便逛逛</span></a><a class="rightMenu-item menu-link" href="/categories/"><i class="anzhiyufont anzhiyu-icon-cube"></i><span>博客分类</span></a><a class="rightMenu-item menu-link" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags"></i><span>文章标签</span></a></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item" id="menu-copy" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制地址</span></a><a class="rightMenu-item" id="menu-commentBarrage" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-message"></i><span class="menu-commentBarrage-text">关闭热评</span></a><a class="rightMenu-item" id="menu-darkmode" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span class="menu-darkmode-text">深色模式</span></a><a class="rightMenu-item" id="menu-translate" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-language"></i><span>轉為繁體</span></a></div></div><div id="rightmenu-mask"></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.cbd.int/@fancyapps/ui@5.0.20/dist/fancybox/fancybox.umd.js"></script><script src="https://cdn.cbd.int/instant.page@5.2.0/instantpage.js" type="module"></script><script src="https://cdn.cbd.int/vanilla-lazyload@17.3.1/dist/lazyload.iife.min.js"></script><script src="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.js"></script><script>function panguFn () {
  if (typeof pangu === 'object') pangu.autoSpacingPage()
  else {
    getScript('https://cdn.cbd.int/pangu@4.0.7/dist/browser/pangu.min.js')
      .then(() => {
        pangu.autoSpacingPage()
      })
  }
}

function panguInit () {
  if (false){
    GLOBAL_CONFIG_SITE.isPost && panguFn()
  } else {
    panguFn()
  }
}

document.addEventListener('DOMContentLoaded', panguInit)</script><canvas id="universe"></canvas><script async src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/dark/dark.js"></script><script>// 消除控制台打印
var HoldLog = console.log;
console.log = function () {};
let now1 = new Date();
queueMicrotask(() => {
  const Log = function () {
    HoldLog.apply(console, arguments);
  }; //在恢复前输出日志
  const grt = new Date("07/01/2021 00:00:00"); //此处修改你的建站时间或者网站上线时间
  now1.setTime(now1.getTime() + 250);
  const days = (now1 - grt) / 1000 / 60 / 60 / 24;
  const dnum = Math.floor(days);
  const ascll = [
    `欢迎使用安知鱼!`,
    `生活明朗, 万物可爱`,
    `
        
       █████╗ ███╗   ██╗███████╗██╗  ██╗██╗██╗   ██╗██╗   ██╗
      ██╔══██╗████╗  ██║╚══███╔╝██║  ██║██║╚██╗ ██╔╝██║   ██║
      ███████║██╔██╗ ██║  ███╔╝ ███████║██║ ╚████╔╝ ██║   ██║
      ██╔══██║██║╚██╗██║ ███╔╝  ██╔══██║██║  ╚██╔╝  ██║   ██║
      ██║  ██║██║ ╚████║███████╗██║  ██║██║   ██║   ╚██████╔╝
      ╚═╝  ╚═╝╚═╝  ╚═══╝╚══════╝╚═╝  ╚═╝╚═╝   ╚═╝    ╚═════╝
        
        `,
    "已上线",
    dnum,
    "天",
    "©2020 By 安知鱼 V1.5.4",
  ];
  const ascll2 = [`NCC2-036`, `调用前置摄像头拍照成功，识别为【小笨蛋】.`, `Photo captured: `, `🤪`];

  setTimeout(
    Log.bind(
      console,
      `\n%c${ascll[0]} %c ${ascll[1]} %c ${ascll[2]} %c${ascll[3]}%c ${ascll[4]}%c ${ascll[5]}\n\n%c ${ascll[6]}\n`,
      "color:#3b70fc",
      "",
      "color:#3b70fc",
      "color:#3b70fc",
      "",
      "color:#3b70fc",
      ""
    )
  );
  setTimeout(
    Log.bind(
      console,
      `%c ${ascll2[0]} %c ${ascll2[1]} %c \n${ascll2[2]} %c\n${ascll2[3]}\n`,
      "color:white; background-color:#4fd953",
      "",
      "",
      'background:url("https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/tinggge.gif") no-repeat;font-size:450%'
    )
  );

  setTimeout(Log.bind(console, "%c WELCOME %c 你好，小笨蛋.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(
      console,
      "%c ⚡ Powered by 安知鱼 %c 你正在访问 Ada 的博客.",
      "color:white; background-color:#f0ad4e",
      ""
    )
  );

  setTimeout(Log.bind(console, "%c W23-12 %c 你已打开控制台.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(console, "%c S013-782 %c 你现在正处于监控中.", "color:white; background-color:#d9534f", "")
  );
});</script><script async src="/anzhiyu/random.js"></script><script src="https://cdn.cbd.int/algoliasearch@4.18.0/dist/algoliasearch-lite.umd.js"></script><script src="https://cdn.cbd.int/instantsearch.js@4.56.5/dist/instantsearch.production.min.js"></script><script src="/js/search/algolia.js"></script><div class="js-pjax"><script>function loadValine () {
  function initValine () {
    const valine = new Valine(Object.assign({
      el: '#vcomment',
      appId: 'HvNn2fnND9DnBkt32cvR8g5x-gzGzoHsz',
      appKey: '1FgE4n7EeWrdtvsJCcB20dfD',
      avatar: 'mp',
      serverURLs: '',
      emojiMaps: "",
      path: window.location.pathname,
      visitor: false
    }, null))
  }

  if (typeof Valine === 'function') initValine() 
  else getScript('https://cdn.cbd.int/valine@1.5.1/dist/Valine.min.js').then(initValine)
}

if ('Valine' === 'Valine' || !false) {
  if (false) anzhiyu.loadComment(document.getElementById('vcomment'),loadValine)
  else setTimeout(loadValine, 0)
} else {
  function loadOtherComment () {
    loadValine()
  }
}</script><input type="hidden" name="page-type" id="page-type" value="post"></div><script src="https://cdn.cbd.int/blueimp-md5@2.19.0/js/md5.min.js"></script><script>window.addEventListener('load', () => {
  const changeContent = (content) => {
    if (content === '') return content

    content = content.replace(/<img.*?src="(.*?)"?[^\>]+>/ig, '[图片]') // replace image link
    content = content.replace(/<a[^>]+?href=["']?([^"']+)["']?[^>]*>([^<]+)<\/a>/gi, '[链接]') // replace url
    content = content.replace(/<pre><code>.*?<\/pre>/gi, '[代码]') // replace code
    content = content.replace(/<[^>]+>/g,"") // remove html tag

    if (content.length > 150) {
      content = content.substring(0,150) + '...'
    }
    return content
  }

  const getIcon = (icon, mail) => {
    if (icon) return icon
    let defaultIcon = '?d=mp'
    let iconUrl = `https://gravatar.loli.net/avatar/${md5(mail.toLowerCase()) + defaultIcon}`
    return iconUrl
  }

  const generateHtml = array => {
    let result = ''

    if (array.length) {
      for (let i = 0; i < array.length; i++) {
        result += '<div class=\'aside-list-item\'>'

        if (true) {
          const name = 'data-lazy-src'
          result += `<a href='${array[i].url}' class='thumbnail'><img ${name}='${array[i].avatar}' alt='${array[i].nick}'></a>`
        }

        result += `<div class='content'>
        <a class='comment' href='${array[i].url}' title='${array[i].content}'>${array[i].content}</a>
        <div class='name'><span>${array[i].nick} / </span><time datetime="${array[i].date}">${anzhiyu.diffDate(array[i].date, true)}</time></div>
        </div></div>`
      }
    } else {
      result += '没有评论'
    }

    let $dom = document.querySelector('#card-newest-comments .aside-list')
    $dom.innerHTML= result
    window.lazyLoadInstance && window.lazyLoadInstance.update()
    window.pjax && window.pjax.refresh($dom)
  }

  const getComment = () => {
    const serverURL = 'https://HvNn2fnN.api.lncldglobal.com'

    var settings = {
      "method": "GET",
      "headers": {
        "X-LC-Id": 'HvNn2fnND9DnBkt32cvR8g5x-gzGzoHsz',
        "X-LC-Key": '1FgE4n7EeWrdtvsJCcB20dfD',
        "Content-Type": "application/json"
      },
    }

    fetch(`${serverURL}/1.1/classes/Comment?limit=6&order=-createdAt`,settings)
      .then(response => response.json())
      .then(data => {
        const valineArray = data.results.map(function (e) {
          return {
            'avatar': getIcon(e.QQAvatar, e.mail),
            'content': changeContent(e.comment),
            'nick': e.nick,
            'url': e.url + '#' + e.objectId,
            'date': e.updatedAt,
          }
        })
        saveToLocal.set('valine-newest-comments', JSON.stringify(valineArray), 10/(60*24))
        generateHtml(valineArray)
      }).catch(e => {
        const $dom = document.querySelector('#card-newest-comments .aside-list')
        $dom.innerHTML= "无法获取评论，请确认相关配置是否正确"
      }) 
  }

  const newestCommentInit = () => {
    if (document.querySelector('#card-newest-comments .aside-list')) {
      const data = saveToLocal.get('valine-newest-comments')
      if (data) {
        generateHtml(JSON.parse(data))
      } else {
        getComment()
      }
    }
  }

  newestCommentInit()
  document.addEventListener('pjax:complete', newestCommentInit)
})</script><script>var visitorMail = "visitor@anheyu.com";</script><script>//动态标题
let leaveTitle = 'w(ﾟДﾟ)w 不要走！再看看嘛！';
let backTitle = '♪(^∇^*)欢迎肥来！';
let OriginTitile = document.title
let titleTime
document.addEventListener('visibilitychange', function () {
  if (document.hidden) {
    //离开当前页面时标签显示内容
    document.title = leaveTitle
    clearTimeout(titleTime)
  } else {
    //返回当前页面时标签显示内容
    document.title = backTitle + OriginTitile
    //两秒后变回正常标题
    titleTime = setTimeout(function () {
      document.title = OriginTitile
    }, 2000)
  }
})</script><script async data-pjax src="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/waterfall/waterfall.js"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/qrcodejs/1.0.0/qrcode.min.js"></script><script>// 初始化函数
let rm = {};

//禁止图片与超链接拖拽
let aElements = document.getElementsByTagName("a");
for (let i = 0; i < aElements.length; i++) {
  aElements[i].setAttribute("draggable", "false");
  let imgElements = aElements[i].getElementsByTagName("img");
  for (let j = 0; j < imgElements.length; j++) {
    imgElements[j].setAttribute("draggable", "false");
  }
}

// 显示菜单
rm.showRightMenu = function (isTrue, x = 0, y = 0) {
  console.info(x, y)
  let rightMenu = document.getElementById("rightMenu");
  rightMenu.style.top = x + "px";
  rightMenu.style.left = y + "px";
  if (isTrue) {
    rightMenu.style.display = "block";
    stopMaskScroll();
  } else {
    rightMenu.style.display = "none";
  }
};

// 隐藏菜单
rm.hideRightMenu = function () {
  rm.showRightMenu(false);
  let rightMenuMask = document.querySelector("#rightmenu-mask");
  rightMenuMask.style.display = "none";
};

// 尺寸
let rmWidth = document.getElementById("rightMenu").offsetWidth;
let rmHeight = document.getElementById("rightMenu").offsetHeight;

// 重新定义尺寸
rm.reloadrmSize = function () {
  rightMenu.style.visibility = "hidden";
  rightMenu.style.display = "block";
  // 获取宽度和高度
  rmWidth = document.getElementById("rightMenu").offsetWidth;
  rmHeight = document.getElementById("rightMenu").offsetHeight;
  rightMenu.style.visibility = "visible";
};

// 获取点击的href
let domhref = "";
let domImgSrc = "";
let globalEvent = null;

var oncontextmenuFunction = function (event) {
  if (document.body.clientWidth > 768) {
    let pageX = event.clientX + 10; //加10是为了防止显示时鼠标遮在菜单上
    let pageY = event.clientY;

    //其他额外菜单
    const $rightMenuOther = document.querySelector(".rightMenuOther");
    const $rightMenuPlugin = document.querySelector(".rightMenuPlugin");
    const $rightMenuCopyText = document.querySelector("#menu-copytext");
    const $rightMenuPasteText = document.querySelector("#menu-pastetext");
    const $rightMenuCommentText = document.querySelector("#menu-commenttext");
    const $rightMenuNewWindow = document.querySelector("#menu-newwindow");
    const $rightMenuNewWindowImg = document.querySelector("#menu-newwindowimg");
    const $rightMenuCopyLink = document.querySelector("#menu-copylink");
    const $rightMenuCopyImg = document.querySelector("#menu-copyimg");
    const $rightMenuDownloadImg = document.querySelector("#menu-downloadimg");
    const $rightMenuSearch = document.querySelector("#menu-search");
    const $rightMenuSearchBaidu = document.querySelector("#menu-searchBaidu");
    const $rightMenuMusicToggle = document.querySelector("#menu-music-toggle");
    const $rightMenuMusicBack = document.querySelector("#menu-music-back");
    const $rightMenuMusicForward = document.querySelector("#menu-music-forward");
    const $rightMenuMusicPlaylist = document.querySelector("#menu-music-playlist");
    const $rightMenuMusicCopyMusicName = document.querySelector("#menu-music-copyMusicName");

    let href = event.target.href;
    let imgsrc = event.target.currentSrc;

    // 判断模式 扩展模式为有事件
    let pluginMode = false;
    $rightMenuOther.style.display = "block";
    globalEvent = event;

    // 检查是否需要复制 是否有选中文本
    if (selectTextNow && window.getSelection()) {
      pluginMode = true;
      $rightMenuCopyText.style.display = "block";
      $rightMenuCommentText.style.display = "block";
      $rightMenuSearch.style.display = "block";
      $rightMenuSearchBaidu.style.display = "block";
    } else {
      $rightMenuCopyText.style.display = "none";
      $rightMenuCommentText.style.display = "none";
      $rightMenuSearchBaidu.style.display = "none";
      $rightMenuSearch.style.display = "none";
    }

    //检查是否右键点击了链接a标签
    if (href) {
      pluginMode = true;
      $rightMenuNewWindow.style.display = "block";
      $rightMenuCopyLink.style.display = "block";
      domhref = href;
    } else {
      $rightMenuNewWindow.style.display = "none";
      $rightMenuCopyLink.style.display = "none";
    }

    //检查是否需要复制图片
    if (imgsrc) {
      pluginMode = true;
      $rightMenuCopyImg.style.display = "block";
      $rightMenuDownloadImg.style.display = "block";
      $rightMenuNewWindowImg.style.display = "block";
      document.getElementById("rightMenu").style.width="12rem"
      domImgSrc = imgsrc;
    } else {
      $rightMenuCopyImg.style.display = "none";
      $rightMenuDownloadImg.style.display = "none";
      $rightMenuNewWindowImg.style.display = "none";
    }

    // 判断是否为输入框
    if (event.target.tagName.toLowerCase() === "input" || event.target.tagName.toLowerCase() === "textarea") {
      pluginMode = true;
      $rightMenuPasteText.style.display = "block";
    } else {
      $rightMenuPasteText.style.display = "none";
    }
    const navMusicEl = document.querySelector("#nav-music");
    //判断是否是音乐
    if (navMusicEl && navMusicEl.contains(event.target)) {
      pluginMode = true;
      $rightMenuMusicToggle.style.display = "block";
      $rightMenuMusicBack.style.display = "block";
      $rightMenuMusicForward.style.display = "block";
      $rightMenuMusicPlaylist.style.display = "block";
      $rightMenuMusicCopyMusicName.style.display = "block";
    } else {
      $rightMenuMusicToggle.style.display = "none";
      $rightMenuMusicBack.style.display = "none";
      $rightMenuMusicForward.style.display = "none";
      $rightMenuMusicPlaylist.style.display = "none";
      $rightMenuMusicCopyMusicName.style.display = "none";
    }

    // 如果不是扩展模式则隐藏扩展模块
    if (pluginMode) {
      $rightMenuOther.style.display = "none";
      $rightMenuPlugin.style.display = "block";
    } else {
      $rightMenuPlugin.style.display = "none";
    }

    rm.reloadrmSize();

    // 鼠标默认显示在鼠标右下方，当鼠标靠右或靠下时，将菜单显示在鼠标左方\上方
    if (pageX + rmWidth > window.innerWidth) {
      pageX -= rmWidth + 10;
    }
    if (pageY + rmHeight > window.innerHeight) {
      pageY -= pageY + rmHeight - window.innerHeight;
    }

    rm.showRightMenu(true, pageY, pageX);
    document.getElementById("rightmenu-mask").style.display = "flex";
    return false;
  }
};

// 监听右键初始化
window.oncontextmenu = oncontextmenuFunction

// 下载图片状态
rm.downloadimging = false;

// 复制图片到剪贴板
rm.writeClipImg = function (imgsrc) {
  console.log("按下复制");
  rm.hideRightMenu();
  anzhiyu.snackbarShow("正在下载中，请稍后", false, 10000);
  if (rm.downloadimging == false) {
    rm.downloadimging = true;
    setTimeout(function () {
      copyImage(imgsrc);
      anzhiyu.snackbarShow("复制成功！图片已添加盲水印，请遵守版权协议");
      rm.downloadimging = false;
    }, "10000");
  }
};

function imageToBlob(imageURL) {
  const img = new Image();
  const c = document.createElement("canvas");
  const ctx = c.getContext("2d");
  img.crossOrigin = "";
  img.src = imageURL;
  return new Promise(resolve => {
    img.onload = function () {
      c.width = this.naturalWidth;
      c.height = this.naturalHeight;
      ctx.drawImage(this, 0, 0);
      c.toBlob(
        blob => {
          // here the image is a blob
          resolve(blob);
        },
        "image/png",
        0.75
      );
    };
  });
}

async function copyImage(imageURL) {
  const blob = await imageToBlob(imageURL);
  const item = new ClipboardItem({ "image/png": blob });
  navigator.clipboard.write([item]);
}

rm.copyUrl = function (id) {
  const input = document.createElement("input"); // Create a new <input> element
  input.id = "copyVal"; // Set the id of the new element to "copyVal"
  document.body.appendChild(input); // Append the new element to the end of the <body> element
  
  const text = id;
  input.value = text;
  input.select();
  input.setSelectionRange(0, input.value.length);
  document.execCommand("copy");
  
  input.remove(); // Remove the <input> element from the DOM
};

function stopMaskScroll() {
  if (document.getElementById("rightmenu-mask")) {
    let xscroll = document.getElementById("rightmenu-mask");
    xscroll.addEventListener(
      "mousewheel",
      function (e) {
        //阻止浏览器默认方法
        rm.hideRightMenu();
        // e.preventDefault();
      },
      { passive: true }
    );
  }
  if (document.getElementById("rightMenu")) {
    let xscroll = document.getElementById("rightMenu");
    xscroll.addEventListener(
      "mousewheel",
      function (e) {
        //阻止浏览器默认方法
        rm.hideRightMenu();
        // e.preventDefault();
      },
      { passive: true }
    );
  }
}

rm.rightmenuCopyText = function (txt) {
  if (navigator.clipboard) {
    navigator.clipboard.writeText(txt);
  }
  rm.hideRightMenu();
};

rm.copyPageUrl = function (url) {
  if (!url) {
    url = window.location.href;
  }
  rm.copyUrl(url);
  anzhiyu.snackbarShow("复制链接地址成功", false, 2000);
  rm.hideRightMenu();
};

rm.sharePage = function () {
  var content = window.location.href;
  rm.copyUrl(url);
  anzhiyu.snackbarShow("复制链接地址成功", false, 2000);
  rm.hideRightMenu();
};

// 复制当前选中文本
var selectTextNow = "";
document.onmouseup = document.ondblclick = selceText;

function selceText() {
  var txt;
  if (document.selection) {
    txt = document.selection.createRange().text;
  } else {
    txt = window.getSelection().toString();
  }
  selectTextNow = txt !== "" ? txt : "";
}

// 读取剪切板
rm.readClipboard = function () {
  if (navigator.clipboard) {
    navigator.clipboard.readText().then(clipText => rm.insertAtCaret(globalEvent.target, clipText));
  }
};

// 粘贴文本到焦点
rm.insertAtCaret = function (elemt, value) {
  const startPos = elemt.selectionStart,
    endPos = elemt.selectionEnd;
  if (document.selection) {
    elemt.focus();
    var sel = document.selection.createRange();
    sel.text = value;
    elemt.focus();
  } else {
    if (startPos || startPos == "0") {
      var scrollTop = elemt.scrollTop;
      elemt.value = elemt.value.substring(0, startPos) + value + elemt.value.substring(endPos, elemt.value.length);
      elemt.focus();
      elemt.selectionStart = startPos + value.length;
      elemt.selectionEnd = startPos + value.length;
      elemt.scrollTop = scrollTop;
    } else {
      elemt.value += value;
      elemt.focus();
    }
  }
};

//粘贴文本
rm.pasteText = function () {
  const result = rm.readClipboard() || "";
  rm.hideRightMenu();
};

//引用到评论
rm.rightMenuCommentText = function (txt) {
  rm.hideRightMenu();
  const postCommentDom = document.getElementById("post-comment");
  var domTop = postCommentDom.offsetTop;
  window.scrollTo(0, domTop - 80);
  if (txt == "undefined" || txt == "null") txt = "好棒！";
  function setText() {
    setTimeout(() => {
      var input = document.getElementsByClassName("el-textarea__inner")[0];
      if (!input) setText();
      let evt = document.createEvent("HTMLEvents");
      evt.initEvent("input", true, true);
      let inputValue = replaceAll(txt, "\n", "\n> ");
      input.value = "> " + inputValue + "\n\n";
      input.dispatchEvent(evt);
      input.focus();
      input.setSelectionRange(-1, -1);
      if (document.getElementById("comment-tips")) {
        document.getElementById("comment-tips").classList.add("show");
      }
    }, 100);
  }
  setText();
};

//替换所有内容
function replaceAll(string, search, replace) {
  return string.split(search).join(replace);
}

// 百度搜索
rm.searchBaidu = function () {
  anzhiyu.snackbarShow("即将跳转到百度搜索", false, 2000);
  setTimeout(function () {
    window.open("https://www.baidu.com/s?wd=" + selectTextNow);
  }, "2000");
  rm.hideRightMenu();
};

//分享链接
rm.copyLink = function () {
  rm.rightmenuCopyText(domhref);
  anzhiyu.snackbarShow("已复制链接地址");
};

function addRightMenuClickEvent() {
  // 添加点击事件
  document.getElementById("menu-backward").addEventListener("click", function () {
  window.history.back();
    rm.hideRightMenu();
  });

  document.getElementById("menu-forward").addEventListener("click", function () {
    window.history.forward();
    rm.hideRightMenu();
  });

  document.getElementById("menu-refresh").addEventListener("click", function () {
    window.location.reload();
  });

  document.getElementById("menu-top").addEventListener("click", function () {
    anzhiyu.scrollToDest(0, 500);
    rm.hideRightMenu();
  });

  const menuLinks = document.querySelectorAll(".menu-link");
  menuLinks.forEach(function (link) {
    link.addEventListener("click", rm.hideRightMenu);
  });

  document.getElementById("menu-darkmode").addEventListener("click", anzhiyu.switchDarkMode);

  document.getElementById("menu-home") && document.getElementById("menu-home").addEventListener("click", function () {
    window.location.href = window.location.origin;
  });

  document.getElementById("menu-randomPost").addEventListener("click", function () {
    toRandomPost();
  });

  document.getElementById("menu-commentBarrage").addEventListener("click", anzhiyu.switchCommentBarrage);

  document.getElementById("rightmenu-mask").addEventListener("click", rm.hideRightMenu);

  document.getElementById("rightmenu-mask").addEventListener("contextmenu", function (event) {
    rm.hideRightMenu();
    event.preventDefault(); // Prevent the default context menu from appearing
  });

  document.getElementById("menu-copy").addEventListener("click", rm.copyPageUrl);

  document.getElementById("menu-pastetext").addEventListener("click", rm.pasteText);

  document.getElementById("menu-copytext").addEventListener("click", function () {
    rm.rightmenuCopyText(selectTextNow);
    anzhiyu.snackbarShow("复制成功，复制和转载请标注本文地址");
  });

  document.getElementById("menu-commenttext").addEventListener("click", function () {
    rm.rightMenuCommentText(selectTextNow);
  });

  document.getElementById("menu-newwindow").addEventListener("click", function () {
    window.open(domhref, "_blank");
    rm.hideRightMenu();
  });

  document.getElementById("menu-copylink").addEventListener("click", rm.copyLink);

  document.getElementById("menu-downloadimg").addEventListener("click", function () {
    anzhiyu.downloadImage(domImgSrc, "anzhiyu");
  });

  document.getElementById("menu-newwindowimg").addEventListener("click", function () {
    window.open(domImgSrc, "_blank");
    rm.hideRightMenu();
  });

  document.getElementById("menu-copyimg").addEventListener("click", function () {
    rm.writeClipImg(domImgSrc);
  });

  document.getElementById("menu-searchBaidu").addEventListener("click", rm.searchBaidu);

  //音乐
  document.getElementById("menu-music-toggle").addEventListener("click", anzhiyu.musicToggle);

  document.getElementById("menu-music-back").addEventListener("click", anzhiyu.musicSkipBack);

  document.getElementById("menu-music-forward").addEventListener("click", anzhiyu.musicSkipForward);

  document.getElementById("menu-music-copyMusicName").addEventListener("click", function () {
    rm.rightmenuCopyText(anzhiyu.musicGetName());
    anzhiyu.snackbarShow("复制歌曲名称成功", false, 3000);
  });

}

addRightMenuClickEvent();</script><script data-pjax>var themeColorMeta = document.querySelector('meta[name="theme-color"]');
var pageHeaderEl = document.getElementById("page-header");
var navMusicEl = document.getElementById("nav-music");
var consoleEl = document.getElementById("console");
// 已随机的歌曲
var selectRandomSong = [];
// 音乐默认声音大小
var musicVolume = 0.8;
// 是否切换了周杰伦音乐列表
var changeMusicListFlag = false;
// 当前默认播放列表
var defaultPlayMusicList = [];

document.getElementById("page-name").innerText = document.title.split(" | Ada")[0];
anzhiyu.initIndexEssay();
anzhiyu.changeTimeInEssay();
anzhiyu.removeBodyPaceClass();
anzhiyu.qrcodeCreate();
anzhiyu.changeTimeInAlbumDetail();
anzhiyu.reflashEssayWaterFall();
anzhiyu.sayhi();
anzhiyu.stopImgRightDrag();
anzhiyu.addNavBackgroundInit();
anzhiyu.setValueToBodyType();
anzhiyu.catalogActive();
anzhiyu.tagsPageActive();
anzhiyu.categoriesBarActive();
anzhiyu.topCategoriesBarScroll();
anzhiyu.switchRightClickMenuHotReview();
anzhiyu.getCustomPlayList();
anzhiyu.addEventListenerConsoleMusicList(false);
setTimeout(() => {if (typeof addFriendLinksInFooter === "function") {addFriendLinksInFooter();}}, 200)</script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.9/icon/ali_iconfont_css.css"><script>(function(i,s,o,g,r,a,m){i["DaoVoiceObject"]=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;a.charset="utf-8";m.parentNode.insertBefore(a,m)})(window,document,"script",('https:' == document.location.protocol ? 'https:' : 'http:') + "//widget.daovoice.io/widget/51b8faf5.js","daovoice")
</script><script>var isChatBtn = true
daovoice('init', {
  app_id: '51b8faf5',},{
  launcher: { 
     disableLauncherIcon: isChatBtn // 悬浮 ICON 是否显示
  },
});
daovoice('update');

if (isChatBtn) {
  var chatBtnFn = () => {
    var chatBtn = document.getElementById("chat_btn")
    chatBtn.addEventListener("click", function(){
      daovoice('show')
    });
  }
  chatBtnFn()
} else {
  if (false) {
    function chatBtnHide () {
      daovoice('update', {},{
        launcher: { 
        disableLauncherIcon: true // 悬浮 ICON 是否显示
        },
      });
    }
    function chatBtnShow () {
      daovoice('update', {},{
        launcher: { 
        disableLauncherIcon: false // 悬浮 ICON 是否显示
        },
      });
    }
  }
}</script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/aplayer/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.cbd.int/anzhiyu-blog-static@1.0.1/js/APlayer.min.js"></script><script src="https://cdn.cbd.int/hexo-anzhiyu-music@1.0.1/assets/js/Meting2.min.js"></script><script src="https://cdn.cbd.int/pjax@0.2.8/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]

var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {
  // removeEventListener scroll 
  window.tocScrollFn && window.removeEventListener('scroll', window.tocScrollFn)
  window.scrollCollect && window.removeEventListener('scroll', scrollCollect)

  document.getElementById('rightside').style.cssText = "opacity: ''; transform: ''"
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof chatBtnFn === 'function' && chatBtnFn()
  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', (e) => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script charset="UTF-8" src="https://cdn.cbd.int/anzhiyu-theme-static@1.1.5/accesskey/accesskey.js"></script></div><div id="popup-window"><div class="popup-window-title">通知</div><div class="popup-window-divider"></div><div class="popup-window-content"><div class="popup-tip">你好呀</div><div class="popup-link"><i class="anzhiyufont anzhiyu-icon-arrow-circle-right"></i></div></div></div><script>(function (w, d, s, id) {
            if (typeof (w.webpushr) !== 'undefined') return; w.webpushr = w.webpushr || function () { (w.webpushr.q = w.webpushr.q || []).push(arguments) }; var js, fjs = d.getElementsByTagName(s)[0]; js = d.createElement(s); js.id = id; js.async = 1; js.src = "https://cdn.webpushr.com/app.min.js";fjs.parentNode.appendChild(js);}(window, document, 'script', 'webpushr-jssdk'));webpushr('setup', { 'key': 'BJjeD4reRc-1D_UEhL5kJQ8sMsvWDWxrZjvv5Wg1G1OHaFJhaKNKofyRr208shfSmbYfP2v8u9hZ7LlTZ0LnXK0' });</script></body></html>